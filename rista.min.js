!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.rista=t():e.rista=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e,t){y(e,t),w&&g(document.documentElement)}function i(e){for(var t=e instanceof Event?e.target:e.target.block,n="rt-"+e.type,r=[],i=void 0;;){if(!i&&1==t.nodeType&&t.hasAttribute(n)&&r.unshift(t),t=t.parentNode,!t)break;if(t[b]){i=t[b];for(var s=r.length;s;){var o=r[--s],a=i[o.getAttribute(n)];a&&(a.call(i,e,o),r.splice(s,1))}if(!r.length)break}}}var s=n(1),o=s.EventEmitter,a=s.map,l=s.list,u=s.cellx,h=s.d,c=s.utils,f=n(4),d=n(3),v=n(9),_=n(2),p=n(6),g=p.applyComponents,m=p.destroyComponents,b=_.KEY_COMPONENT,y=_.defineSubclass,E=["click","dblclick","mousedown","mouseup","mouseover","mousemove","mouseout","dragstart","drag","dragenter","dragleave","dragover","drop","dragend","keydown","keypress","keyup","abort","error","resize","select","change","submit","reset","focusin","focusout"],w=!1;document.addEventListener("DOMContentLoaded",function C(){document.removeEventListener("DOMContentLoaded",C),c.nextTick(function(){E.forEach(function(e){document.addEventListener(e,i)}),v(function(e,t){e.forEach(function(e){1==e.nodeType&&m(e)}),t.forEach(function(e){1==e.nodeType&&g(e)})}),g(document.documentElement),w=!0})}),r("html",{_handleEvent:function(e){_.prototype._handleEvent.call(this,e),i.call(this,e)}});var x=e.exports={EventEmitter:o,map:a,list:l,cellx:u,d:h,utils:c,settings:f,morphElement:d,Component:_,component:r};x.rista=x},function(e,t,n){!function(t){"use strict";function n(e,t){function r(e){return s(r,i,t,this,e,u.call(arguments,1),arguments.length)}t||(t={});var i=e;if(r.constructor=n,t.onchange||t.onerror){if(!t.owner)throw new TypeError("Owner is required");r.call(t.owner)}return r}function r(e,t){for(var n=Object.getOwnPropertyNames(t),r=n.length;r;)Object.defineProperty(e,n[--r],Object.getOwnPropertyDescriptor(t,n[r]));return e}function i(e){var t;e.Extends?(t=e.Extends,delete e.Extends):t=Object;var n;o.call(e,"constructor")?(n=e.constructor,delete e.constructor):n=function(){},e.Static&&(r(n,e.Static),delete e.Static);var i=n.prototype=Object.create(t.prototype);return e.Implements&&(e.Implements.forEach(function(e){r(i,e.prototype)}),delete e.Implements),r(i,e),i.constructor=n,n}var s,o=Object.prototype.hasOwnProperty,a=Object.prototype.toString,l=Array.prototype.push,u=Array.prototype.slice,h=Array.prototype.splice,c=Function("return this;")();n.cellx=n;var f="__cellx_uid__",d="__cellx_cells__";c.Symbol&&"symbol"==typeof Symbol.iterator&&(f=Symbol(f),d=Symbol(d)),n.KEY_CELLS=d;var v,_=0;v=c.console?console.error?function(e){console.error(e===Object(e)&&e.stack||e)}:function(e){console.log("Error: "+(e===Object(e)&&e.stack||e))}:function(){},n._logError=v;var p=Object.is||function(e,t){return 0===e&&0===t?1/e==1/t:e===t||e!=e&&t!=t},g=Array.isArray||function(e){return"[object Array]"==a.call(e)},m=function(){if(c.process&&"[object process]"==process.toString()&&process.nextTick)return process.nextTick;if(c.setImmediate)return function(e){setImmediate(e)};if(c.Promise&&-1!=Promise.toString().indexOf("[native code]")){var e=Promise.resolve();return function(t){e.then(function(){t()})}}if(c.postMessage&&!c.ActiveXObject){var t;return c.addEventListener("message",function(){if(t){var e=t;t=null;for(var r=0,i=e.length;i>r;r++)try{e[r]()}catch(s){n._logError(s)}}},!1),function(e){t?t.push(e):(t=[e],postMessage("__tic__","*"))}}return function(e){setTimeout(e,1)}}();!function(){var e=c.Map;if(!e){var r={value:t};e=i({constructor:function(e){if(this._entries=Object.create(null),this._objectStamps={},this._first=null,this._last=null,this.size=0,e)for(var t=0,n=e.length;n>t;t++)this.set(e[t][0],e[t][1])},has:function(e){return!!this._entries[this._getValueStamp(e)]},get:function(e){return(this._entries[this._getValueStamp(e)]||r).value},set:function(e,t){var n=this._entries,r=this._getValueStamp(e);if(n[r])n[r].value=t;else{var i=n[r]={key:e,keyStamp:r,value:t,prev:this._last,next:null};this.size++?this._last.next=i:this._first=i,this._last=i}return this},"delete":function(e){var t=this._getValueStamp(e),n=this._entries[t];if(!n)return!1;if(--this.size){var r=n.prev,i=n.next;r?r.next=i:this._first=i,i?i.prev=r:this._last=r}else this._first=null,this._last=null;return delete this._entries[t],delete this._objectStamps[t],!0},clear:function(){var e=this._entries;for(var t in e)delete e[t];this._objectStamps={},this._first=null,this._last=null,this.size=0},_getValueStamp:function(e){switch(typeof e){case"undefined":return"undefined";case"object":if(null===e)return"null";break;case"boolean":return"?"+e;case"number":return"+"+e;case"string":return","+e}return this._getObjectStamp(e)},_getObjectStamp:function(e){if(!o.call(e,f)){if(!Object.isExtensible(e)){var t,n=this._objectStamps;for(t in n)if(n[t]==e)return t;return t=String(++_),n[t]=e,t}Object.defineProperty(e,f,{value:String(++_)})}return e[f]},forEach:function(e,t){null==t&&(t=c);for(var n=this._first;n;){e.call(t,n.value,n.key,this);do n=n.next;while(n&&!this._entries[n.keyStamp])}},toString:function(){return"[object Map]"}}),[["keys",function(e){return e.key}],["values",function(e){return e.value}],["entries",function(e){return[e.key,e.value]}]].forEach(function(n){var r=n[1];e.prototype[n[0]]=function(){var e,n=this._entries,i=!1,s=this;return{next:function(){if(!i){if(e){do e=e.next;while(e&&!n[e.keyStamp])}else e=s._first;if(e)return{value:r(e),done:!1};i=!0}return{value:t,done:!0}}}}})}n.Map=e}(),function(){var e="__cellx_EventEmitter_inner__";c.Symbol&&"symbol"==typeof Symbol.iterator&&(e=Symbol(e));var t=i({Static:{KEY_INNER:e},constructor:function(){this._events=Object.create(null)},on:function(e,t,n){if("object"==typeof e){n=t;var r=e;for(e in r)this._on(e,r[e],n)}else this._on(e,t,n);return this},off:function(e,t,n){if(e)if("object"==typeof e){n=t;var r=e;for(e in r)this._off(e,r[e],n)}else this._off(e,t,n);else this._events&&(this._events=Object.create(null));return this},_on:function(e,t,n){var r=e.indexOf(":");if(-1!=r)this["_"+e.slice(r+1)]("on",e.slice(0,r),t,n);else{var i=(this._events||(this._events=Object.create(null)))[e];i||(i=this._events[e]=[]),i.push({listener:t,context:n||this})}},_off:function(t,n,r){var i=t.indexOf(":");if(-1!=i)this["_"+t.slice(i+1)]("off",t.slice(0,i),n,r);else{var s=this._events&&this._events[t];if(!s)return;r||(r=this);for(var o=s.length;o;){var a=s[--o];if(a.context==r&&(a.listener==n||a.listener[e]===n)){s.splice(o,1);break}}s.length||delete this._events[t]}},once:function(t,n,r){function i(){return this._off(t,i,r),n.apply(this,arguments)}return i[e]=n,this._on(t,i,r),this},emit:function(e){return"string"==typeof e?e={target:this,type:e}:e.target||(e.target=this),this._handleEvent(e),e},_handleEvent:function(e){var t=this._events&&this._events[e.type];if(t){t=t.slice();for(var n=0,r=t.length;r>n;n++)try{t[n].listener.call(t[n].context,e)===!1&&(e.isPropagationStopped=!0)}catch(i){this._logError(i)}}},_logError:function(e){n._logError(e)}});n.EventEmitter=t}();var b;!function(){var e=n.Map,t=n.EventEmitter;b=i({Extends:t,constructor:function(){this._valueCounts=new e},_onItemChange:function(e){this._handleEvent(e)},_registerValue:function(e){var n=this._valueCounts,r=n.get(e);r?n.set(e,r+1):(n.set(e,1),this.adoptsItemChanges&&e instanceof t&&e.on("change",this._onItemChange,this))},_unregisterValue:function(e){var n=this._valueCounts,r=n.get(e);r>1?n.set(e,r-1):(n["delete"](e),this.adoptsItemChanges&&e instanceof t&&e.off("change",this._onItemChange,this))},dispose:function(){this.adoptsItemChanges&&this._valueCounts.forEach(function(e){e instanceof t&&e.off("change",this._onItemChange,this)},this)}})}(),function(){function e(e,t){return new o(e,"boolean"==typeof t?{adoptsItemChanges:t}:t)}var r=n.Map,s=n.EventEmitter,o=i({Extends:s,Implements:[b],constructor:function(e,t){if(s.call(this),b.call(this),this._entries=new r,this.size=0,this.adoptsItemChanges=!t||t.adoptsItemChanges!==!1,e){var n=this._entries;if(e instanceof o)e._entries.forEach(function(e,t){n.set(t,e),this._registerValue(e)},this);else if(g(e))for(var i=0,a=e.length;a>i;i++){var l=e[i];n.set(l[0],l[1]),this._registerValue(l[1])}else for(var u in e)n.set(u,e[u]),this._registerValue(e[u]);this.size=n.size}},has:function(e){return this._entries.has(e)},contains:function(e){return this._valueCounts.has(e)},get:function(e){return this._entries.get(e)},set:function(e,t){var n,r=this._entries,i=r.has(e);if(i){if(n=r.get(e),p(n,t))return this;this._unregisterValue(n)}return r.set(e,t),this._registerValue(t),i||this.size++,this.emit({type:"change",subtype:i?"update":"add",key:e,oldValue:n,value:t}),this},"delete":function(e){var n=this._entries;if(!n.has(e))return!1;var r=n.get(e);return n["delete"](e),this._unregisterValue(r),this.size--,this.emit({type:"change",subtype:"delete",key:e,oldValue:r,value:t}),!0},clear:function(){return this.size?(this._entries.clear(),this._valueCounts.clear(),this.size=0,this.emit({type:"change",subtype:"clear"}),this):this},forEach:function(e,t){null==t&&(t=c),this._entries.forEach(function(n,r){e.call(t,n,r,this)},this)},keys:function(){return this._entries.keys()},values:function(){return this._entries.values()},entries:function(){return this._entries.entries()},clone:function(){return new this.constructor(this,{adoptsItemChanges:this.adoptsItemChanges})}});n.ObservableMap=o,n.map=e}(),function(){function e(e,t){return t>e?-1:e>t?1:0}function r(e,t){var n=e._items;if(e.sorted)for(var r=e.comparator,i=0,s=t.length;s>i;i++){for(var o=t[i],a=0,u=n.length;a!=u;){var h=a+u>>1;r(o,n[h])<0?u=h:a=h+1}n.splice(a,0,o),e._registerValue(o)}else{l.apply(n,t);for(var c=t.length;c;)e._registerValue(t[--c])}e.length=n.length}function s(e,t){return new a(e,"boolean"==typeof t?{adoptsItemChanges:t}:t)}var o=n.EventEmitter,a=i({Extends:o,Implements:[b],constructor:function(t,n){o.call(this),b.call(this),n||(n={}),this._items=[],this.length=0,this.adoptsItemChanges=n.adoptsItemChanges!==!1,this.comparator=null,this.sorted=!1,(n.sorted||n.comparator&&n.sorted!==!1)&&(this.comparator=n.comparator||e,this.sorted=!0),t&&r(this,t instanceof a?t._items:t)},_validateIndex:function(e,n){if(e===t)return e;if(0>e){if(e+=this.length,0>e)throw new RangeError("Index out of range")}else if(e>=this.length+(n?1:0))throw new RangeError("Index out of range");return e},contains:function(e){return this._valueCounts.has(e)},indexOf:function(e,t){return this._items.indexOf(e,this._validateIndex(t))},lastIndexOf:function(e,t){return this._items.lastIndexOf(e,this._validateIndex(t))},get:function(e){return this._items[this._validateIndex(e)]},getRange:function(e,n){e=this._validateIndex(e||0,!0);var r=this._items;if(n===t)return r.slice(e);if(e+n>r.length)throw new RangeError('"index" and "count" do not denote a valid range');return r.slice(e,e+n)},set:function(e,t){if(this.sorted)throw new TypeError("Can't set to sorted list");e=this._validateIndex(e);var n=this._items;return p(n[e],t)?this:(this._unregisterValue(n[e]),n[e]=t,this._registerValue(t),this.emit("change"),this)},setRange:function(e,t){if(this.sorted)throw new TypeError("Can't set to sorted list");e=this._validateIndex(e);var n=t.length;if(!n)return this;if(e+n>this.length)throw new RangeError('"index" and length of "items" do not denote a valid range');for(var r=this._items,i=!1,s=e+n;s>e;){var o=t[--s];p(r[s],o)||(this._unregisterValue(r[s]),r[s]=o,this._registerValue(o),i=!0)}return i&&this.emit("change"),this},add:function(e){return this.addRange([e]),this},addRange:function(e){return e.length?(r(this,e),this.emit("change"),this):this},insert:function(e,t){return this.insertRange(e,[t]),this},insertRange:function(e,t){if(this.sorted)throw new TypeError("Can't insert to sorted list");e=this._validateIndex(e,!0);var n=t.length;if(!n)return this;h.apply(this._items,[].concat(e,0,t));for(var r=n;r;)this._registerValue(t[--r]);return this.length+=n,this.emit("change"),this},remove:function(e,t){var n=this._items.indexOf(e,this._validateIndex(t));return-1==n?this:(this._items.splice(n,1),this._unregisterValue(e),this.length--,this.emit("change"),this)},removeAll:function(e,t){for(var n=this._items,r=this._validateIndex(t),i=!1;-1!=(r=n.indexOf(e,r));)n.splice(r,1),this._unregisterValue(e),i=!0;return i&&(this.length=n.length,this.emit("change")),this},removeAt:function(e){return this._unregisterValue(this._items.splice(this._validateIndex(e),1)[0]),this.length--,this.emit("change"),this},removeRange:function(e,n){e=this._validateIndex(e||0,!0);var r=this._items;if(n===t)n=r.length-e;else if(e+n>r.length)throw new RangeError('"index" and "count" do not denote a valid range');if(!n)return this;for(var i=e+n;i>e;)this._unregisterValue(r[--i]);return r.splice(e,n),this.length-=n,this.emit("change"),this},clear:function(){return this.length&&(this._items.length=0,this._valueCounts.clear(),this.length=0,this.emit("change")),this},join:function(e){return this._items.join(e)},forEach:null,map:null,filter:null,every:null,some:null,reduce:null,reduceRight:null,clone:function(){return new this.constructor(this,{adoptsItemChanges:this.adoptsItemChanges,comparator:this.comparator,sorted:this.sorted})},toArray:function(){return this._items.slice()},toString:function(){return this._items.join()}});["forEach","map","filter","every","some","reduce","reduceRight"].forEach(function(e){a.prototype[e]=function(){return Array.prototype[e].apply(this._items,arguments)}}),n.ObservableList=a,n.list=s}(),function(){function e(){if(!(u>h)){a=!0;do{var e=l[u];if(e){var t=e.shift();if(u){var n=u;t._active&&t._recalc(),l[n].length||(l[n]=null,u&&u++)}else{var r=t._changeEvent;t._fixedValue=t._value,t._changeEvent=null,t._changed=!0,t._events.change&&t._handleEvent(r);for(var i=t._slaves,s=0,o=i.length;o>s;s++){var c=i[s];c._fixed&&((l[1]||(l[1]=[])).push(c),h||(h=1),c._fixed=!1)}l[0].length||u++}}else u++}while(h>=u);h=-1,f++,a=!1}}var r=n.EventEmitter,s=r.KEY_INNER,o={original:null},a=!1,l=[[]],u=0,h=-1,c=null,f=1,d=i({Extends:r,constructor:function(e,n){r.call(this),n||(n={}),this.owner=n.owner||null,this.computed="function"==typeof e&&(n.computed!==t?n.computed:e.constructor==Function),this._value=t,this._fixedValue=t,this.initialValue=t,this._formula=null,this._get=n.get||null,this._set=n.set||null,this._validate=n.validate||null,this._masters=null,this._slaves=[],this._level=0,this._active=!this.computed,this._changeEvent=null,this._isChangeCancellable=!0,this._lastErrorEvent=null,this._fixed=!0,this._version=0,this._changed=!1,this._circularityCounter=0,this.computed?this._formula=e:(this._validate&&this._validate.call(this.owner||this,e),this._value=this._fixedValue=this.initialValue=e,e instanceof r&&e.on("change",this._onValueChange,this)),n.onchange&&this.on("change",n.onchange),n.onerror&&this.on("error",n.onerror)},get changed(){return a||e(),this._changed},on:function(t,n,i){return a||e(),!this.computed||this._events.change||this._slaves.length||this._activate(),r.prototype.on.call(this,t,n,i),this},off:function(t,n,i){return a||e(),r.prototype.off.call(this,t,n,i),!this.computed||this._events.change||this._slaves.length||this._deactivate(),this},_on:function(e,t,n){r.prototype._on.call(this,e,t,n||this.owner)},_off:function(e,t,n){r.prototype._off.call(this,e,t,n||this.owner)},subscribe:function(e){function t(t){return e.call(this,t.error||null,t)}return t[s]=e,this.on("change",t).on("error",t),this},unsubscribe:function(e){return this.off("change",e).off("error",e),this},_registerSlave:function(e){!this.computed||this._events.change||this._slaves.length||this._activate(),this._slaves.push(e)},_unregisterSlave:function(e){this._slaves.splice(this._slaves.indexOf(e),1),!this.computed||this._events.change||this._slaves.length||this._deactivate()},_activate:function(){if(this._version!=f){this._masters=null,this._level=0;var e=this._tryFormula();e===o?this._handleError(o.original):p(this._value,e)||(this._value=e,this._changed=!0),this._version=f}for(var t=this._masters||[],n=t.length;n;)t[--n]._registerSlave(this);this._active=!0},_deactivate:function(){for(var e=this._masters||[],t=e.length;t;)e[--t]._unregisterSlave(this);this._active=!1},_onValueChange:function(t){this._changeEvent?(t.prev=this._changeEvent,this._changeEvent=t,this._value===this._fixedValue&&(this._isChangeCancellable=!1)):(l[0].push(this),u=0,-1==h&&(h=0),t.prev=null,this._changeEvent=t,this._isChangeCancellable=!1,a||m(e))},get:function(){if(a||e(),this.computed&&!this._active&&this._version!=f){this._masters=null,this._level=0;var t=this._tryFormula();t===o?this._handleError(o.original):p(this._value,t)||(this._value=t,this._changed=!0),this._version=f}return c&&(c._masters?-1==c._masters.indexOf(this)&&(c._masters.push(this),c._level<=this._level&&(c._level=this._level+1)):(c._masters=[this],c._level=this._level+1)),this._get?this._get.call(this.owner||this,this._value):this._value},set:function(t){if(this.computed&&!this._set)throw new TypeError((this.debugKey?"["+this.debugKey+"] ":"")+"Cannot write to read-only cell");var n=this._value;return p(n,t)?!1:(this._validate&&this._validate.call(this.owner||this,t),this.computed?this._set.call(this.owner||this,t):(this._value=t,n instanceof r&&n.off("change",this._onValueChange,this),t instanceof r&&t.on("change",this._onValueChange,this),this._changeEvent?p(t,this._fixedValue)&&this._isChangeCancellable?(1==l[0].length?(l[0].pop(),h||(h=-1)):l[0].splice(l[0].indexOf(this),1),this._changeEvent=null):this._changeEvent={target:this,type:"change",oldValue:n,value:t,prev:this._changeEvent}:(l[0].push(this),u=0,-1==h&&(h=0),this._changeEvent={target:this,type:"change",oldValue:n,value:t,prev:null},this._isChangeCancellable=!0,a||m(e))),!0)},recalc:function(){return this._recalc(!0)},_recalc:function(t){if(!t)if(this._version==f+1){if(10==++this._circularityCounter)return this._fixed=!0,this._version=f+1,this._handleError(new RangeError("Circular dependency detected")),!1}else this._circularityCounter=1;var n=this._masters;this._masters=null;var i=this._level;this._level=0;for(var s=this._tryFormula(),a=this._masters||[],u=!1,c=n.length;c;){var d=n[--c];-1==a.indexOf(d)&&(d._unregisterSlave(this),u=!0)}if(u||n.length<a.length){for(var v=a.length;v;){var _=a[--v];-1==n.indexOf(_)&&_._registerSlave(this)}var g=this._level;if(g>i)return(l[g]||(l[g]=[])).push(this),g>h&&(h=g),void(t&&m(e))}if(this._fixed=!0,this._version=f+1,s===o)this._handleError(o.original);else{var b=this._value;if(!p(b,s)||s instanceof r){this._value=s,this._changed=!0,this._events.change&&this.emit({type:"change",oldValue:b,value:s,prev:null});for(var y=this._slaves,E=0,w=y.length;w>E;E++){var x=y[E];if(x._fixed){var C=x._level;(l[C]||(l[C]=[])).push(x),C>h&&(h=C),x._fixed=!1}}return!0}}return!1},_tryFormula:function(){var e=c;c=this;try{var t=this._formula.call(this.owner||this);return this._validate&&this._validate.call(this.owner||this,t),t}catch(n){return o.original=n,o}finally{c=e}},_handleError:function(e){this._logError(e),this._handleErrorEvent({type:"error",error:e})},_logError:function(e){n._logError((this.debugKey?"["+this.debugKey+"] ":"")+e.stack)},_handleErrorEvent:function(e){if(this._lastErrorEvent!==e){this._lastErrorEvent=e,this._handleEvent(e);for(var t=this._slaves,n=0,r=t.length;r>n&&!e.isPropagationStopped;n++)t[n]._handleErrorEvent(e)}},dispose:function(){return a||e(),this._dispose(),this},_dispose:function(){if(this.off(),this._active)for(var e=this._slaves,t=0,n=e.length;n>t;t++)e[t]._dispose()}});n.Cell=d}(),function(){var e=n.Map,t=n.Cell,r=t.prototype;s=function(i,s,a,l,u,h,f){l&&l!=c||(l=i),o.call(l,d)||Object.defineProperty(l,d,{value:new e});var v=l[d].get(i);if(!v){if(f>=2&&"dispose"===u)return;a.cloneValue&&(s=a.cloneValue(s)),a=Object.create(a),a.owner=l,v=new t(s,a),l[d].set(i,v)}switch(f){case 0:return v.get();case 1:return v.set(u);default:switch(u){case"bind":return i=i.bind(l),i.constructor=n,i;case"unwrap":return v;default:return r[u].apply(v,h)}}}}(),function(){function e(t,r,i,s){if(1==arguments.length)return s=t,function(t,n,r){return e(t,n,r,s)};s||(s={}),s.computed=!1;var o="_"+r;return t[o]=n(i.initializer.call(t),s),{configurable:i.configurable,enumerable:i.enumerable,get:function(){return this[o]()},set:function(e){this[o](e)}}}function t(e,r,i,s){if(1==arguments.length)return s=e,function(e,n,r){return t(e,n,r,s)};var o=i.initializer();if("function"!=typeof o)throw new TypeError("Property value must be a function");s||(s={}),s.computed=!0;var a="_"+r;e[a]=n(o,s);var l={configurable:i.configurable,enumerable:i.enumerable,get:function(){return this[a]()}};return s.set&&(l.set=function(e){this[a](e)}),l}n.d={observable:e,computed:t}}(),n.utils={logError:v,mixin:r,createClass:i,nextTick:m},e.exports=n}()},function(e,t,n){"use strict";function r(e){if(!/^[a-z](?:\-?[0-9a-z])*$/i.test(e))throw new TypeError('Component name "'+e+'" is not valid')}function i(e){return e[0].toLowerCase()+e.slice(1).replace(/([A-Z])/g,"-$1").replace("--","-").toLowerCase()}function s(e){return e[0].toUpperCase()+e.slice(1).replace(/\-([0-9a-z])/gi,function(e,t){return t.toUpperCase()})}function o(e){return O[i(e)]}function a(e,t){if(O[e])throw new TypeError('Component "'+e+'" is already registered');return O[e]=t,S+=", "+e,t}function l(e,t){return r(e),a(i(e),t)}function u(e,t){r(e);var n=s(e),o=i(e),l=Function("Component","return function "+n+"(block) { Component.call(this, block); };")(k),u=l.prototype=Object.create(k.prototype);if(g(u,t),u.constructor=l,!u.blockName)switch(b.blockNameCase){case"camel":u.blockName=n[0].toLowerCase()+n.slice(1);break;case"pascal":u.blockName=n;break;case"hyphen":u.blockName=o}return a(o,l)}function h(e){for(var t=e.attributes,n=[],r=t.length;r;){var i=t[--r];n.push(i.name+"="+i.value)}return JSON.stringify(n.sort())}function c(e,t){var n=document.createElement("div");n.innerHTML=t?e._blockInnerHTML():e._blockOuterHTML(),w(e.block,t?n:n.firstElementChild,{contentOnly:t,getElementKey:function(e){if(e.hasAttribute("key"))return e.getAttribute("key");if(e.hasAttribute("rt-is")||o(e.tagName.toLowerCase())){var t=e[C];return t?t:t=e[C]=h(e)}},onBeforeMorphElement:function(t){var n=t[x];return n?n==e?!0:n.canComponentMorph?n.canComponentMorph():!1:void 0},onBeforeMorphElementContent:function(e){e[C]||!e.hasAttribute("rt-is")&&!o(e.tagName.toLowerCase())||(e[C]=h(e))},onNodeDiscarded:function(e){e[x]&&e[x].destroy()}})}var f=n(1),d=f.EventEmitter,v=f.cellx,_=f.utils,p=_.logError,g=_.mixin,m=_.createClass,b=n(4),y=n(8),E=n(7),w=n(3),x="__rista_component__",C="__rista_initialKey__",k=void 0,O=Object.create(null),S="[rt-is]";k=m({Extends:d,Static:{KEY_COMPONENT:x,getSubclass:o,registerSubclass:l,defineSubclass:u,getSelector:function(){return S}},blockName:void 0,_blockOuterHTML:v(function(){var e=this.render();return Array.isArray(e)?e.join(""):e}),_blockInnerHTML:v(function(){var e=this.renderInner();return Array.isArray(e)?e.join(""):e}),constructor:function(e){if(e[x])throw new TypeError("Element is already used as a block of component");this._disposables={},this.block=e,e[x]=this,this.destroyed=!1,E(e,this.blockName)||(e.className=this.blockName+" "+e.className),this.preinit&&this.preinit(),this.render?(c(this,!1),this._blockOuterHTML("on","change",this._onBlockOuterHTMLChange)):this.renderInner&&(c(this,!0),this._blockInnerHTML("on","change",this._onBlockInnerHTMLChange)),this.init&&this.init()},_handleEvent:function(e){d.prototype._handleEvent.call(this,e);var t=this.getParent();t&&e.bubbles!==!1&&!e.isPropagationStopped&&(t.destroyed||t._handleEvent(e))},preinit:null,render:null,renderInner:null,init:null,dispose:null,_onBlockOuterHTMLChange:function(){c(this,!1)},_onBlockInnerHTMLChange:function(){c(this,!0)},getParent:function(){for(var e=this.block;e=e.parentNode;)if(e[x])return e[x];return null},getDescendants:function(){return Array.prototype.map.call(this.block.querySelectorAll(S),function(e){return e[x]}).filter(function(e){return e})},$:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){return e=e.split("&"),e=1==e.length?e[0]:e.join("."+this.blockName),"function"==typeof $&&$.fn?$(this.block).find(e):this.block.querySelectorAll(e)}),$$:function(e){for(var t=this.block.querySelectorAll("[name="+e+"]"),n=[],r=0,i=t.length;i>r;r++){var s=t[r][x];s&&n.push(s)}return n},broadcast:function(e,t){var n=Array.prototype.slice.call(arguments,2);return this.$$(e).slice().map(function(e){return e.destroyed||"function"!=typeof e[t]?void 0:e[t].apply(e,n)})},listenTo:function(e,t,n,r){var i=this,s=void 0;if(Array.isArray(e)||e instanceof NodeList||e instanceof HTMLCollection||e.addClass&&e.append){s=[];for(var o=0,a=e.length;a>o;o++)s.push(this.listenTo(e[o],t,n,r))}else if("object"==typeof t)if(s=[],Array.isArray(t))for(var l=t,o=0,a=l.length;a>o;o++)s.push(this.listenTo(e,l[o],n,r));else{var u=t;r=n;for(var h in u)s.push(this.listenTo(e,h,u[h],r))}else if(Array.isArray(n)){s=[];for(var u=n,o=0,a=u.length;a>o;o++)s.push(this.listenTo(e,t,u[o],r))}else{if("object"!=typeof n)return this._listenTo(e,t,n,r);s=[];var u=n;for(var c in u)s.push(this.listenTo(e[c]("unwrap",0),t,u[c],r))}var f=y(),d=function(){for(var e=s.length;e;)s[--e].stop();delete i._disposables[f]},v=this._disposables[f]={stop:d,dispose:d};return v},_listenTo:function(e,t,n,r){var i=this;if(r||(r=this),e instanceof d)e.on(t,n,r);else{if("function"!=typeof e.addEventListener)throw new TypeError("Unable to add a listener");e!=r&&(n=n.bind(r)),e.addEventListener(t,n)}var s=y(),o=function(){i._disposables[s]&&(e instanceof d?e.off(t,n,r):e.removeEventListener(t,n),delete i._disposables[s])},a=this._disposables[s]={stop:o,dispose:o};return a},setTimeout:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e,t){var n=this,r=y(),i=setTimeout(function(){delete n._disposables[r],e.call(n)},t),s=function(){n._disposables[r]&&(clearTimeout(i),delete n._disposables[r])},o=this._disposables[r]={clear:s,dispose:s};return o}),setInterval:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e,t){var n=this,r=y(),i=setInterval(function(){e.call(n)},t),s=function(){n._disposables[r]&&(clearInterval(i),delete n._disposables[r])},o=this._disposables[r]={clear:s,dispose:s};return o}),registerCallback:function(e){var t=this,n=y(),r=this,i=function(){return r._disposables[n]?(delete r._disposables[n],e.apply(r,arguments)):void 0},s=function(){delete t._disposables[n]};return i.cancel=s,i.dispose=s,this._disposables[n]=i,i},destroy:function(){if(!this.destroyed){this._blockOuterHTML("dispose",0),this._blockInnerHTML("dispose",0);var e=this._disposables;for(var t in e)e[t].dispose();if(this.dispose)try{this.dispose()}catch(n){p(n)}this.block[x]=null,this.destroyed=!0}}}),e.exports=k},function(e,t){"use strict";function n(){}function r(e){return e.getAttribute("key")}function i(e,t){for(var n=t.attributes,r=Object.create(null),i=n.length;i;){var s=n[--i],o=s.name,a=s.value;r[o]=!0,e.getAttribute(o)!=a&&e.setAttribute(o,a)}for(var l=e.attributes,i=l.length;i;){var s=l[--i],o=s.name;r[o]||e.removeAttribute(o)}}function s(e,t,s){function h(e){for(var t=e.childNodes,n=0,r=t.length;r>n;n++){var i=t[n];if(1==i.nodeType){var s=f(i);if(s){var a=i.tagName+o+s;(m[a]||(m[a]=[])).push(i)}h(i)}}}function c(e,t,n){if(1==e.nodeType){if(!n){if(v(e,t)===!1)return;if(i(e,t),_(e,t)===!1)return}for(var r=e.childNodes,s={},d=0,y=r.length;y>d;d++){var E=r[d],w=void 0;switch(E.nodeType){case 1:var x=f(E);if(x){w=E.tagName+o+x;var C=b[w];if(C){var k=C.shift();C.length||delete b[w],k.blank.parentNode.replaceChild(E,k.blank),c(E,k.element,!1)}else(m[w]||(m[w]=[])).push(E);continue}w=E.tagName;break;case 3:w=a+E.nodeValue;break;case 8:w=l+E.nodeValue;break;default:throw new TypeError("Unsupported node type")}(s[w]||(s[w]=[])).push(E)}for(var O=t.childNodes,S=0,T=O.length;T>S;S++){var I=O[S],w=void 0,N=!1;switch(I.nodeType){case 1:var x=f(I);x?(w=I.tagName+o+x,N=!0):w=I.tagName;break;case 3:w=a+I.nodeValue;break;case 8:w=l+I.nodeValue;break;default:throw new TypeError("Unsupported node type")}var V=N?m:s,j=V[w],L=r[S]||null;if(j){var A=j.shift();j.length||delete V[w],L&&A==L||e.insertBefore(A,L),1==A.nodeType&&c(A,I,!1)}else switch(I.nodeType){case 1:var k=document.createElement(I.tagName);e.insertBefore(k,L),N?(b[w]||(b[w]=[])).push({blank:k,element:I}):c(k,I,!1);break;case 3:e.insertBefore(document.createTextNode(I.nodeValue),L);break;case 8:e.insertBefore(document.createComment(I.nodeValue),L);break;default:throw new TypeError("Unsupported node type")}}for(var w in s)for(var M=s[w],z=0,P=M.length;P>z;z++){var E=M[z];p(E)!==!1&&(E.parentNode.removeChild(E),1==E.nodeType&&h(E),g(E))}var R=u[e.tagName];R&&R(e,t)}else e.nodeValue=t.nodeValue}s||(s={});var f=s.getElementKey||r,d=s.contentOnly===!0,v=s.onBeforeMorphElement||n,_=s.onBeforeMorphElementContent||n,p=s.onBeforeNodeDiscarded||n,g=s.onNodeDiscarded||n,m=Object.create(null),b=Object.create(null);c(e,t,d);var y=void 0;do{y=!1;for(var E in b){y=!0;var w=b[E];delete b[E];for(var x=0,C=w.length;C>x;x++){var k=w[x];c(k.blank,k.element,!1)}}}while(y);for(var E in m)for(var w=m[E],O=0,S=w.length;S>O;O++){var k=w[O];p(k)!==!1&&(k.parentNode.removeChild(k),g(k))}}var o=":",a=",",l="#",u={INPUT:function(e,t){e.value!=t.value&&(e.value=t.value),e.checked=t.checked},TEXTAREA:function(e,t){var n=t.value;e.value!=n&&(e.value=n),e.firstChild&&(e.firstChild.nodeValue=n)},OPTION:function(e,t){e.selected=t.selected}};e.exports=s},function(e,t){"use strict";var n={blockNameCase:"camel"};e.exports=n},function(e,t,n){"use strict";var r=n(1),i=r.Map,s=r.utils.createClass,o=window.Set;o&&-1!=o.toString().indexOf("[native code]")||(o=s({constructor:function(){this._entries=new i,this.size=0},has:function(e){return this._entries.has(e)},add:function(e){return this._entries.set(e,e),this.size=this._entries.size,this},"delete":function(e){return this._entries["delete"](e)?(this.size--,!0):!1},clear:function(){this._entries.clear(),this.size=0},forEach:function(e,t){var n=this;null==t&&(t=window),this._entries.forEach(function(r){e.call(t,r,r,n)})}})),e.exports=o},function(e,t,n){"use strict";function r(e){var t=[];return(e.hasAttribute("rt-is")||h(e.tagName.toLowerCase()))&&t.push(e),t.push.apply(t,e.querySelectorAll(c())),t}function i(e){for(var t=r(e),n=t.length;n;){var i=t[--n];if(!i[u]){var s=h(i.getAttribute("rt-is")||i.tagName.toLowerCase());if(s)try{new s(i)}catch(o){a(o)}}}}function s(e){for(var t=r(e),n=t.length;n;){var i=t[--n][u];i&&i.destroy()}}var o=n(1),a=o.utils.logError,l=n(2),u=l.KEY_COMPONENT,h=l.getSubclass,c=l.getSelector;e.exports={applyComponents:i,destroyComponents:s}},function(e,t){"use strict";var n=void 0;document.documentElement.classList?n=function(e,t){return e.classList.contains(t)}:!function(){var e=/\S+/g;n=function(t,n){return-1!=(t.className.match(e)||[]).indexOf(n)}}(),e.exports=n},function(e,t){"use strict";function n(){return String(++r)}var r=0;e.exports=n},function(e,t,n){"use strict";function r(){if(f=!1,h.size||c.size){for(var e=0,t=d.length;t>e;e++)d[e](h,c);h.clear(),c.clear()}}function i(e){c.has(e)?c["delete"](e):(h.add(e),f||(f=!0,l(r)))}function s(e){h.has(e)?h["delete"](e):(c.add(e),f||(f=!0,l(r)))}function o(e){d.push(e)}var a=n(1),l=a.utils.nextTick,u=n(5),h=new u,c=new u,f=!1,d=[],v=window.MutationObserver||window.WebKitMutationObserver,_=document.documentElement;v?document.addEventListener("DOMContentLoaded",function p(){document.removeEventListener("DOMContentLoaded",p);var e=new v(function(e){for(var t=0,n=e.length;n>t;t++){
for(var r=e[t],o=r.removedNodes,a=r.addedNodes,l=0,u=o.length;u>l;l++)i(o[l]);for(var h=0,c=a.length;c>h;h++)s(a[h])}});e.observe(_,{childList:!0,subtree:!0})}):(_.addEventListener("DOMNodeRemoved",function(e){i(e.target)},!1),_.addEventListener("DOMNodeInserted",function(e){s(e.target)},!1)),e.exports=o}])});