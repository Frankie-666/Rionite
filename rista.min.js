!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.rista=e():t.rista=e()}(this,function(){return function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return t[i].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function i(t,e){y(t,e),x&&g(document.documentElement)}function r(t){for(var e=t instanceof Event?t.target:t.target.block,n="rt-"+t.type,i=[],r=void 0;;){if(!r&&1==e.nodeType&&e.hasAttribute(n)&&i.unshift(e),e=e.parentNode,!e)break;if(e[b]){r=e[b];for(var s=i.length;s;){var o=i[--s],a=r[o.getAttribute(n)];a&&(a.call(r,t,o),i.splice(s,1))}if(!i.length)break}}}var s=n(1),o=s.EventEmitter,a=s.map,l=s.list,u=s.cellx,c=s.d,h=s.utils,f=n(3),d=n(9),v=n(4),_=n(2),p=n(6),g=p.applyComponents,m=p.destroyComponents,b=_.KEY_COMPONENT,y=_.defineSubclass,E=["click","dblclick","mousedown","mouseup","mouseover","mousemove","mouseout","dragstart","drag","dragenter","dragleave","dragover","drop","dragend","keydown","keypress","keyup","abort","error","resize","select","change","submit","reset","input","focusin","focusout"],x=!1;document.addEventListener("DOMContentLoaded",function w(){document.removeEventListener("DOMContentLoaded",w),h.nextTick(function(){E.forEach(function(t){document.addEventListener(t,r)}),d(function(t,e){t.forEach(function(t){1==t.nodeType&&m(t)}),e.forEach(function(t){1==t.nodeType&&g(t)})}),g(document.documentElement),x=!0})}),i("html",{_handleEvent:function(t){_.prototype._handleEvent.call(this,t),r.call(this,t)}});var C=t.exports={EventEmitter:o,map:a,list:l,cellx:u,d:c,utils:h,settings:v,morphElement:f,Component:_,component:i};C.rista=C},function(t,e,n){!function(e){"use strict";function n(t,e){function i(t){return s(i,r,e,this,t,u.call(arguments,1),arguments.length)}e||(e={});var r=t;return i.constructor=n,(e.onchange||e.onerror)&&i.call(e.owner||h),i}function i(t,e){for(var n=Object.getOwnPropertyNames(e),i=n.length;i;)Object.defineProperty(t,n[--i],Object.getOwnPropertyDescriptor(e,n[i]));return t}function r(t){var e;t.Extends?(e=t.Extends,delete t.Extends):e=Object;var n;o.call(t,"constructor")?(n=t.constructor,delete t.constructor):n=function(){},t.Static&&(i(n,t.Static),delete t.Static);var r=n.prototype=Object.create(e.prototype);return t.Implements&&(t.Implements.forEach(function(t){i(r,t.prototype)}),delete t.Implements),i(r,t),r.constructor=n,n}var s,o=Object.prototype.hasOwnProperty,a=Object.prototype.toString,l=Array.prototype.push,u=Array.prototype.slice,c=Array.prototype.splice,h=Function("return this;")();n.cellx=n;var f="__cellx_uid__",d="__cellx_cells__";h.Symbol&&"symbol"==typeof Symbol.iterator&&(f=Symbol(f),d=Symbol(d)),n.KEY_CELLS=d;var v,_=0;v=h.console?console.error?function(t){console.error(t===Object(t)&&t.stack||t)}:function(t){console.log("Error: "+(t===Object(t)&&t.stack||t))}:function(){},n._logError=v;var p,g=Object.is||function(t,e){return 0===t&&0===e?1/t==1/e:t===e||t!=t&&e!=e},m=Array.isArray||function(t){return"[object Array]"==a.call(t)},b=function(){if(h.process&&"[object process]"==process.toString()&&process.nextTick)return process.nextTick;if(h.setImmediate)return function(t){setImmediate(t)};if(h.Promise&&-1!=Promise.toString().indexOf("[native code]")){var t=Promise.resolve();return function(e){t.then(function(){e()})}}if(h.postMessage&&!h.ActiveXObject){var e;return h.addEventListener("message",function(){if(e){var t=e;e=null;for(var i=0,r=t.length;r>i;i++)try{t[i]()}catch(s){n._logError(s)}}}),function(t){e?e.push(t):(e=[t],postMessage("__tic__","*"))}}return function(t){setTimeout(t,1)}}();!function(){if(p=h.Map,!p){var t={value:e};p=r({constructor:function(t){if(this._entries=Object.create(null),this._objectStamps={},this._first=null,this._last=null,this.size=0,t)for(var e=0,n=t.length;n>e;e++)this.set(t[e][0],t[e][1])},has:function(t){return!!this._entries[this._getValueStamp(t)]},get:function(e){return(this._entries[this._getValueStamp(e)]||t).value},set:function(t,e){var n=this._entries,i=this._getValueStamp(t);if(n[i])n[i].value=e;else{var r=n[i]={key:t,keyStamp:i,value:e,prev:this._last,next:null};this.size++?this._last.next=r:this._first=r,this._last=r}return this},"delete":function(t){var e=this._getValueStamp(t),n=this._entries[e];if(!n)return!1;if(--this.size){var i=n.prev,r=n.next;i?i.next=r:this._first=r,r?r.prev=i:this._last=i}else this._first=null,this._last=null;return delete this._entries[e],delete this._objectStamps[e],!0},clear:function(){var t=this._entries;for(var e in t)delete t[e];this._objectStamps={},this._first=null,this._last=null,this.size=0},_getValueStamp:function(t){switch(typeof t){case"undefined":return"undefined";case"object":if(null===t)return"null";break;case"boolean":return"?"+t;case"number":return"+"+t;case"string":return","+t}return this._getObjectStamp(t)},_getObjectStamp:function(t){if(!o.call(t,f)){if(!Object.isExtensible(t)){var e,n=this._objectStamps;for(e in n)if(n[e]==t)return e;return e=String(++_),n[e]=t,e}Object.defineProperty(t,f,{value:String(++_)})}return t[f]},forEach:function(t,e){null==e&&(e=h);for(var n=this._first;n;){t.call(e,n.value,n.key,this);do n=n.next;while(n&&!this._entries[n.keyStamp])}},toString:function(){return"[object Map]"}}),[["keys",function(t){return t.key}],["values",function(t){return t.value}],["entries",function(t){return[t.key,t.value]}]].forEach(function(t){var n=t[1];p.prototype[t[0]]=function(){var t,i=this._entries,r=!1,s=this;return{next:function(){if(!r){if(t){do t=t.next;while(t&&!i[t.keyStamp])}else t=s._first;if(t)return{value:n(t),done:!1};r=!0}return{value:e,done:!0}}}}})}n.Map=p}();var y;!function(){var t="__cellx_EventEmitter_inner__";h.Symbol&&"symbol"==typeof Symbol.iterator&&(t=Symbol(t)),y=r({Static:{KEY_INNER:t},constructor:function(){this._events=Object.create(null)},on:function(t,e,n){if("object"==typeof t){n=e;var i=t;for(t in i)this._on(t,i[t],n)}else this._on(t,e,n);return this},off:function(t,e,n){if(t)if("object"==typeof t){n=e;var i=t;for(t in i)this._off(t,i[t],n)}else this._off(t,e,n);else this._events&&(this._events=Object.create(null));return this},_on:function(t,e,n){var i=t.indexOf(":");if(-1!=i)this["_"+t.slice(i+1)]("on",t.slice(0,i),e,n);else{var r=(this._events||(this._events=Object.create(null)))[t];r||(r=this._events[t]=[]),r.push({listener:e,context:n||this})}},_off:function(e,n,i){var r=e.indexOf(":");if(-1!=r)this["_"+e.slice(r+1)]("off",e.slice(0,r),n,i);else{var s=this._events&&this._events[e];if(!s)return;i||(i=this);for(var o=s.length;o;){var a=s[--o];if(a.context==i&&(a.listener==n||a.listener[t]===n)){s.splice(o,1);break}}s.length||delete this._events[e]}},once:function(e,n,i){function r(){return this._off(e,r,i),n.apply(this,arguments)}return r[t]=n,this._on(e,r,i),this},emit:function(t){return"string"==typeof t?t={target:this,type:t}:t.target||(t.target=this),this._handleEvent(t),t},_handleEvent:function(t){var e=this._events&&this._events[t.type];if(e){e=e.slice();for(var n=0,i=e.length;i>n;n++)try{e[n].listener.call(e[n].context,t)===!1&&(t.isPropagationStopped=!0)}catch(r){this._logError(r)}}},_logError:function(t){n._logError(t)}}),n.EventEmitter=y}();var E;!function(){E=r({Extends:y,constructor:function(){this._valueCounts=new p},_onItemChange:function(t){this._handleEvent(t)},_registerValue:function(t){var e=this._valueCounts,n=e.get(t);n?e.set(t,n+1):(e.set(t,1),this.adoptsItemChanges&&t instanceof y&&t.on("change",this._onItemChange,this))},_unregisterValue:function(t){var e=this._valueCounts,n=e.get(t);n>1?e.set(t,n-1):(e["delete"](t),this.adoptsItemChanges&&t instanceof y&&t.off("change",this._onItemChange,this))},dispose:function(){this.adoptsItemChanges&&this._valueCounts.forEach(function(t){t instanceof y&&t.off("change",this._onItemChange,this)},this)}})}();var x;!function(){function t(t,e){return new x(t,"boolean"==typeof e?{adoptsItemChanges:e}:e)}x=r({Extends:y,Implements:[E],constructor:function(t,e){if(y.call(this),E.call(this),this._entries=new p,this.size=0,this.adoptsItemChanges=!e||e.adoptsItemChanges!==!1,t){var n=this._entries;if(t instanceof x)t._entries.forEach(function(t,e){n.set(e,t),this._registerValue(t)},this);else if(m(t))for(var i=0,r=t.length;r>i;i++){var s=t[i];n.set(s[0],s[1]),this._registerValue(s[1])}else for(var o in t)n.set(o,t[o]),this._registerValue(t[o]);this.size=n.size}},has:function(t){return this._entries.has(t)},contains:function(t){return this._valueCounts.has(t)},get:function(t){return this._entries.get(t)},set:function(t,e){var n,i=this._entries,r=i.has(t);if(r){if(n=i.get(t),g(n,e))return this;this._unregisterValue(n)}return i.set(t,e),this._registerValue(e),r||this.size++,this.emit({type:"change",subtype:r?"update":"add",key:t,oldValue:n,value:e}),this},"delete":function(t){var n=this._entries;if(!n.has(t))return!1;var i=n.get(t);return n["delete"](t),this._unregisterValue(i),this.size--,this.emit({type:"change",subtype:"delete",key:t,oldValue:i,value:e}),!0},clear:function(){return this.size?(this._entries.clear(),this._valueCounts.clear(),this.size=0,this.emit({type:"change",subtype:"clear"}),this):this},forEach:function(t,e){null==e&&(e=h),this._entries.forEach(function(n,i){t.call(e,n,i,this)},this)},keys:function(){return this._entries.keys()},values:function(){return this._entries.values()},entries:function(){return this._entries.entries()},clone:function(){return new this.constructor(this,{adoptsItemChanges:this.adoptsItemChanges})}}),n.ObservableMap=x,n.map=t}();var C;!function(){function t(t,e){return e>t?-1:t>e?1:0}function i(t,e){var n=t._items;if(t.sorted)for(var i=t.comparator,r=0,s=e.length;s>r;r++){for(var o=e[r],a=0,u=n.length;a!=u;){var c=a+u>>1;i(o,n[c])<0?u=c:a=c+1}n.splice(a,0,o),t._registerValue(o)}else{l.apply(n,e);for(var h=e.length;h;)t._registerValue(e[--h])}t.length=n.length}function s(t,e){return new C(t,"boolean"==typeof e?{adoptsItemChanges:e}:e)}C=r({Extends:y,Implements:[E],constructor:function(e,n){y.call(this),E.call(this),n||(n={}),this._items=[],this.length=0,this.adoptsItemChanges=n.adoptsItemChanges!==!1,this.comparator=null,this.sorted=!1,(n.sorted||n.comparator&&n.sorted!==!1)&&(this.comparator=n.comparator||t,this.sorted=!0),e&&i(this,e instanceof C?e._items:e)},_validateIndex:function(t,n){if(t===e)return t;if(0>t){if(t+=this.length,0>t)throw new RangeError("Index out of range")}else if(t>=this.length+(n?1:0))throw new RangeError("Index out of range");return t},contains:function(t){return this._valueCounts.has(t)},indexOf:function(t,e){return this._items.indexOf(t,this._validateIndex(e))},lastIndexOf:function(t,e){return this._items.lastIndexOf(t,this._validateIndex(e))},get:function(t){return this._items[this._validateIndex(t)]},getRange:function(t,n){t=this._validateIndex(t||0,!0);var i=this._items;if(n===e)return i.slice(t);if(t+n>i.length)throw new RangeError('"index" and "count" do not denote a valid range');return i.slice(t,t+n)},set:function(t,e){if(this.sorted)throw new TypeError("Can't set to sorted list");t=this._validateIndex(t);var n=this._items;return g(n[t],e)?this:(this._unregisterValue(n[t]),n[t]=e,this._registerValue(e),this.emit("change"),this)},setRange:function(t,e){if(this.sorted)throw new TypeError("Can't set to sorted list");t=this._validateIndex(t);var n=e.length;if(!n)return this;if(t+n>this.length)throw new RangeError('"index" and length of "items" do not denote a valid range');for(var i=this._items,r=!1,s=t+n;s>t;){var o=e[--s];g(i[s],o)||(this._unregisterValue(i[s]),i[s]=o,this._registerValue(o),r=!0)}return r&&this.emit("change"),this},add:function(t){return this.addRange([t]),this},addRange:function(t){return t.length?(i(this,t),this.emit("change"),this):this},insert:function(t,e){return this.insertRange(t,[e]),this},insertRange:function(t,e){if(this.sorted)throw new TypeError("Can't insert to sorted list");t=this._validateIndex(t,!0);var n=e.length;if(!n)return this;c.apply(this._items,[].concat(t,0,e));for(var i=n;i;)this._registerValue(e[--i]);return this.length+=n,this.emit("change"),this},remove:function(t,e){var n=this._items.indexOf(t,this._validateIndex(e));return-1==n?this:(this._items.splice(n,1),this._unregisterValue(t),this.length--,this.emit("change"),this)},removeAll:function(t,e){for(var n=this._items,i=this._validateIndex(e),r=!1;-1!=(i=n.indexOf(t,i));)n.splice(i,1),this._unregisterValue(t),r=!0;return r&&(this.length=n.length,this.emit("change")),this},removeAt:function(t){return this._unregisterValue(this._items.splice(this._validateIndex(t),1)[0]),this.length--,this.emit("change"),this},removeRange:function(t,n){t=this._validateIndex(t||0,!0);var i=this._items;if(n===e)n=i.length-t;else if(t+n>i.length)throw new RangeError('"index" and "count" do not denote a valid range');if(!n)return this;for(var r=t+n;r>t;)this._unregisterValue(i[--r]);return i.splice(t,n),this.length-=n,this.emit("change"),this},clear:function(){return this.length&&(this._items.length=0,this._valueCounts.clear(),this.length=0,this.emit("change")),this},join:function(t){return this._items.join(t)},forEach:null,map:null,filter:null,every:null,some:null,reduce:null,reduceRight:null,clone:function(){return new this.constructor(this,{adoptsItemChanges:this.adoptsItemChanges,comparator:this.comparator,sorted:this.sorted})},toArray:function(){return this._items.slice()},toString:function(){return this._items.join()}}),["forEach","map","filter","every","some","reduce","reduceRight"].forEach(function(t){C.prototype[t]=function(){return Array.prototype[t].apply(this._items,arguments)}}),n.ObservableList=C,n.list=s}();var w;!function(){function t(){if(!(l>u)){o=!0;do{var t=a[l];if(t){var e=t.shift();if(l){var n=l;e._active&&e._recalc(),a[n].length||(a[n]=null,l&&l++)}else{var i=e._changeEvent;e._fixedValue=e._value,e._changeEvent=null,e._changed=!0,e._events.change&&e._handleEvent(i);for(var r=e._slaves,s=0,c=r.length;c>s;s++){var f=r[s];f._fixed&&((a[1]||(a[1]=[])).push(f),u||(u=1),f._fixed=!1)}a[0].length||l++}}else l++}while(u>=l);u=-1,h++,o=!1}}var i=y.KEY_INNER,s={original:null},o=!1,a=[[]],l=0,u=-1,c=null,h=1;w=r({Extends:y,constructor:function(t,n){y.call(this),n||(n={}),this.owner=n.owner||null,this.computed="function"==typeof t&&(n.computed!==e?n.computed:t.constructor==Function),this._value=e,this._fixedValue=e,this.initialValue=e,this._formula=null,this._get=n.get||null,this._set=n.set||null,this._validate=n.validate||null,this._masters=null,this._slaves=[],this._level=0,this._active=!this.computed,this._changeEvent=null,this._isChangeCancellable=!0,this._lastErrorEvent=null,this._fixed=!0,this._version=0,this._changed=!1,this._circularityCounter=0,this.computed?this._formula=t:(this._validate&&this._validate.call(this.owner||this,t),this._value=this._fixedValue=this.initialValue=t,t instanceof y&&t.on("change",this._onValueChange,this)),n.onchange&&this.on("change",n.onchange),n.onerror&&this.on("error",n.onerror)},get changed(){return o||t(),this._changed},on:function(e,n,i){return o||t(),!this.computed||this._events.change||this._slaves.length||this._activate(),y.prototype.on.call(this,e,n,i),this},off:function(e,n,i){return o||t(),y.prototype.off.call(this,e,n,i),!this.computed||this._events.change||this._slaves.length||this._deactivate(),this},_on:function(t,e,n){y.prototype._on.call(this,t,e,n||this.owner)},_off:function(t,e,n){y.prototype._off.call(this,t,e,n||this.owner)},addChangeListener:function(t,e){return this.on("change",t,e),this},removeChangeListener:function(t,e){return this.off("change",t,e),this},addErrorListener:function(t,e){return this.on("error",t,e),this},removeErrorListener:function(t,e){return this.off("error",t,e),this},subscribe:function(t,e){function n(e){return t.call(this,e.error||null,e)}return n[i]=t,this.on("change",n,e).on("error",n,e),this},unsubscribe:function(t,e){return this.off("change",t,e).off("error",t,e),this},_registerSlave:function(t){!this.computed||this._events.change||this._slaves.length||this._activate(),this._slaves.push(t)},_unregisterSlave:function(t){this._slaves.splice(this._slaves.indexOf(t),1),!this.computed||this._events.change||this._slaves.length||this._deactivate()},_activate:function(){if(this._version!=h){this._masters=null,this._level=0;var t=this._tryFormula();t===s?this._handleError(s.original):g(this._value,t)||(this._value=t,this._changed=!0),this._version=h}for(var e=this._masters||[],n=e.length;n;)e[--n]._registerSlave(this);this._active=!0},_deactivate:function(){for(var t=this._masters||[],e=t.length;e;)t[--e]._unregisterSlave(this);this._active=!1},_onValueChange:function(e){this._changeEvent?(e.prev=this._changeEvent,this._changeEvent=e,this._value===this._fixedValue&&(this._isChangeCancellable=!1)):(a[0].push(this),l=0,-1==u&&(u=0),e.prev=null,this._changeEvent=e,this._isChangeCancellable=!1,o||b(t))},get:function(){if(o||t(),this.computed&&!this._active&&this._version!=h){this._masters=null,this._level=0;var e=this._tryFormula();e===s?this._handleError(s.original):g(this._value,e)||(this._value=e,this._changed=!0),this._version=h}return c&&(c._masters?-1==c._masters.indexOf(this)&&(c._masters.push(this),c._level<=this._level&&(c._level=this._level+1)):(c._masters=[this],c._level=this._level+1)),this._get?this._get.call(this.owner||this,this._value):this._value},set:function(e){if(this.computed&&!this._set)throw new TypeError((this.debugKey?"["+this.debugKey+"] ":"")+"Cannot write to read-only cell");var n=this._value;return g(n,e)?!1:(this._validate&&this._validate.call(this.owner||this,e),this.computed?this._set.call(this.owner||this,e):(this._value=e,n instanceof y&&n.off("change",this._onValueChange,this),e instanceof y&&e.on("change",this._onValueChange,this),this._changeEvent?g(e,this._fixedValue)&&this._isChangeCancellable?(1==a[0].length?(a[0].pop(),u||(u=-1)):a[0].splice(a[0].indexOf(this),1),this._changeEvent=null):this._changeEvent={target:this,type:"change",oldValue:n,value:e,prev:this._changeEvent}:(a[0].push(this),l=0,-1==u&&(u=0),this._changeEvent={target:this,type:"change",oldValue:n,value:e,prev:null},this._isChangeCancellable=!0,o||b(t))),!0)},recalc:function(){return this._recalc(!0)},_recalc:function(e){if(!e)if(this._version==h+1){if(10==++this._circularityCounter)return this._fixed=!0,this._version=h+1,this._handleError(new RangeError("Circular dependency detected")),!1}else this._circularityCounter=1;var n=this._masters;this._masters=null;var i=this._level;this._level=0;for(var r=this._tryFormula(),o=this._masters||[],l=!1,c=n.length;c;){var f=n[--c];-1==o.indexOf(f)&&(f._unregisterSlave(this),l=!0)}if(l||n.length<o.length){for(var d=o.length;d;){var v=o[--d];-1==n.indexOf(v)&&v._registerSlave(this)}var _=this._level;if(_>i)return(a[_]||(a[_]=[])).push(this),_>u&&(u=_),void(e&&b(t))}if(this._fixed=!0,this._version=h+1,r===s)this._handleError(s.original);else{var p=this._value;if(!g(p,r)||r instanceof y){this._value=r,this._changed=!0,this._events.change&&this.emit({type:"change",oldValue:p,value:r,prev:null});for(var m=this._slaves,E=0,x=m.length;x>E;E++){var C=m[E];if(C._fixed){var w=C._level;(a[w]||(a[w]=[])).push(C),w>u&&(u=w),C._fixed=!1}}return!0}}return!1},_tryFormula:function(){var t=c;c=this;try{var e=this._formula.call(this.owner||this);return this._validate&&this._validate.call(this.owner||this,e),e}catch(n){return s.original=n,s}finally{c=t}},_handleError:function(t){this._logError(t),this._handleErrorEvent({type:"error",error:t})},_logError:function(t){n._logError((this.debugKey?"["+this.debugKey+"] ":"")+t.stack)},_handleErrorEvent:function(t){if(this._lastErrorEvent!==t){this._lastErrorEvent=t,this._handleEvent(t);for(var e=this._slaves,n=0,i=e.length;i>n&&!t.isPropagationStopped;n++)e[n]._handleErrorEvent(t)}},dispose:function(){return o||t(),this._dispose(),this},_dispose:function(){if(this.off(),this._active)for(var t=this._slaves,e=0,n=t.length;n>e;e++)t[e]._dispose()}}),n.Cell=w}(),function(){var t=n.Map,e=n.Cell,i=e.prototype;s=function(r,s,a,l,u,c,f){l&&l!=h||(l=r),o.call(l,d)||Object.defineProperty(l,d,{value:new t});var v=l[d].get(r);if(!v){if(f>=2&&"dispose"===u)return;a.cloneValue&&(s=a.cloneValue(s)),a=Object.create(a),a.owner=l,v=new e(s,a),l[d].set(r,v)}switch(f){case 0:return v.get();case 1:return v.set(u);default:switch(u){case"bind":return r=r.bind(l),r.constructor=n,r;case"unwrap":return v;default:return i[u].apply(v,c)}}}}(),function(){function t(e,i,r,s){if(1==arguments.length)return s=e,function(e,n,i){return t(e,n,i,s)};s||(s={}),s.computed=!1;var o="_"+i;return e[o]=n(r.initializer.call(e),s),{configurable:r.configurable,enumerable:r.enumerable,get:function(){return this[o]()},set:function(t){this[o](t)}}}function e(t,i,r,s){if(1==arguments.length)return s=t,function(t,n,i){return e(t,n,i,s)};var o=r.initializer();if("function"!=typeof o)throw new TypeError("Property value must be a function");s||(s={}),s.computed=!0;var a="_"+i;t[a]=n(o,s);var l={configurable:r.configurable,enumerable:r.enumerable,get:function(){return this[a]()}};return s.set&&(l.set=function(t){this[a](t)}),l}n.d={observable:t,computed:e}}(),n.utils={logError:v,mixin:i,createClass:r,nextTick:b},t.exports=n}()},function(t,e,n){"use strict";function i(t){if(!/^[a-z](?:\-?[0-9a-z]+)*$/i.test(t))throw new TypeError('Component name "'+t+'" is not valid')}function r(t){return t[0].toLowerCase()+t.slice(1).replace(/([A-Z])/g,"-$1").replace("--","-").toLowerCase()}function s(t){return t[0].toUpperCase()+t.slice(1).replace(/\-([0-9a-z])/gi,function(t,e){return e.toUpperCase()})}function o(t){return O[t]}function a(t,e){if(O[t])throw new TypeError('Component "'+t+'" is already registered');return O[t]=e,O[t.toUpperCase()]=e,S+=", "+t,e}function l(t,e){return i(t),a(r(t),e)}function u(t,e){i(t);var n=s(t),o=r(t),l=Function("Component","return function "+n+"(block) { Component.call(this, block); };")(k),u=l.prototype=Object.create(k.prototype);if(p(u,e),u.constructor=l,!u.blockName)switch(x.blockNameCase){case"camel":u.blockName=n[0].toLowerCase()+n.slice(1);break;case"pascal":u.blockName=n;break;case"hyphen":u.blockName=o}return a(o,l)}function c(t,e){var n=document.createElement("div");n.innerHTML=e?t._blockInnerHTML():t._blockOuterHTML(),E(t.block,e?n:n.firstElementChild,{contentOnly:e,getElementKey:function(t){var e=t[w];return e?e:(e=t.getAttribute("key"),e?(t[w]=e,e):o(t.getAttribute("rt-is")||t.tagName)?e=t[w]=t.outerHTML:void 0)},onBeforeMorphElement:function(e,n){!e[w]&&o(e.getAttribute("rt-is")||e.tagName)&&(e[w]=n.outerHTML);var i=e[C];return i?i==t?!0:i.canComponentMorph?i.canComponentMorph():!1:void 0},onKeyedElementRemoved:function(t){t[C]&&t[C].destroy()}})}var h=n(1),f=h.EventEmitter,d=h.cellx,v=h.utils,_=v.logError,p=v.mixin,g=v.createClass,m=n(8),b=n(10),y=n(7),E=n(3),x=n(4),C="__rista_component__",w="__rista_componentKey__",k=void 0,O=Object.create(null),S="[rt-is]";k=g({Extends:f,Static:{KEY_COMPONENT:C,getSubclass:o,registerSubclass:l,defineSubclass:u,getSelector:function(){return S}},blockName:void 0,_blockOuterHTML:d(function(){var t=this.render();return Array.isArray(t)?t.join(""):t}),_blockInnerHTML:d(function(){var t=this.renderInner();return Array.isArray(t)?t.join(""):t}),constructor:function(t){if(t[C])throw new TypeError("Element is already used as a block of component");this._disposables={},this.block=t,t[C]=this,this.destroyed=!1,y(t,this.blockName)||(t.className=this.blockName+" "+t.className),this.preinit&&this.preinit(),this.render?(c(this,!1),this._blockOuterHTML("on","change",this._onBlockOuterHTMLChange)):this.renderInner&&(c(this,!0),this._blockInnerHTML("on","change",this._onBlockInnerHTMLChange)),this.init&&this.init()},_handleEvent:function(t){f.prototype._handleEvent.call(this,t);var e=this.getParent();e&&t.bubbles!==!1&&!t.isPropagationStopped&&(e.destroyed||e._handleEvent(t))},preinit:null,render:null,renderInner:null,init:null,dispose:null,_onBlockOuterHTMLChange:function(){var t=this;b(function(){c(t,!1)})},_onBlockInnerHTMLChange:function(){var t=this;b(function(){c(t,!0)})},getParent:function(){for(var t=this.block;t=t.parentNode;)if(t[C])return t[C];return null},getDescendants:function(){return Array.prototype.map.call(this.block.querySelectorAll(S),function(t){return t[C]}).filter(function(t){return t})},$:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(t){return t=t.split("&"),t=1==t.length?t[0]:t.join("."+this.blockName),"function"==typeof $&&$.fn?$(this.block).find(t):this.block.querySelectorAll(t)}),$$:function(t){for(var e=this.block.querySelectorAll("[name="+t+"]"),n=[],i=0,r=e.length;r>i;i++){var s=e[i][C];s&&n.push(s)}return n},broadcast:function(t,e){var n=Array.prototype.slice.call(arguments,2);return this.$$(t).slice().map(function(t){return t.destroyed||"function"!=typeof t[e]?void 0:t[e].apply(t,n)})},listenTo:function(t,e,n,i){var r=this,s=void 0;if(Array.isArray(t)||t instanceof NodeList||t instanceof HTMLCollection||t.addClass&&t.append){s=[];for(var o=0,a=t.length;a>o;o++)s.push(this.listenTo(t[o],e,n,i))}else if("object"==typeof e)if(s=[],Array.isArray(e))for(var l=e,o=0,a=l.length;a>o;o++)s.push(this.listenTo(t,l[o],n,i));else{var u=e;i=n;for(var c in u)s.push(this.listenTo(t,c,u[c],i))}else if(Array.isArray(n)){s=[];for(var u=n,o=0,a=u.length;a>o;o++)s.push(this.listenTo(t,e,u[o],i))}else{if("object"!=typeof n)return this._listenTo(t,e,n,i);s=[];var u=n;for(var h in u)s.push(this.listenTo(t[h]("unwrap",0),e,u[h],i))}var f=m(),d=function(){for(var t=s.length;t;)s[--t].stop();delete r._disposables[f]},v=this._disposables[f]={stop:d,dispose:d};return v},_listenTo:function(t,e,n,i){var r=this;if(i||(i=this),t instanceof f)t.on(e,n,i);else{if("function"!=typeof t.addEventListener)throw new TypeError("Unable to add a listener");t!=i&&(n=n.bind(i)),t.addEventListener(e,n)}var s=m(),o=function(){r._disposables[s]&&(t instanceof f?t.off(e,n,i):t.removeEventListener(e,n),delete r._disposables[s])},a=this._disposables[s]={stop:o,dispose:o};return a},setTimeout:function(t){function e(e,n){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(t,e){var n=this,i=m(),r=setTimeout(function(){delete n._disposables[i],t.call(n)},e),s=function(){n._disposables[i]&&(clearTimeout(r),delete n._disposables[i])},o=this._disposables[i]={clear:s,dispose:s};return o}),setInterval:function(t){function e(e,n){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(t,e){var n=this,i=m(),r=setInterval(function(){t.call(n)},e),s=function(){n._disposables[i]&&(clearInterval(r),delete n._disposables[i])},o=this._disposables[i]={clear:s,dispose:s};return o}),registerCallback:function(t){var e=this,n=m(),i=this,r=function(){return i._disposables[n]?(delete i._disposables[n],t.apply(i,arguments)):void 0},s=function(){delete e._disposables[n]};return r.cancel=s,r.dispose=s,this._disposables[n]=r,r},destroy:function(){if(!this.destroyed){this._blockOuterHTML("dispose",0),this._blockInnerHTML("dispose",0);var t=this._disposables;for(var e in t)t[e].dispose();if(this.dispose)try{this.dispose()}catch(n){_(n)}this.block[C]=null,this.destroyed=!0}}}),t.exports=k},function(t,e){"use strict";function n(){}function i(t){for(var e in t)return!1;return!0}function r(t){return t.getAttribute("key")||void 0}function s(t,e){for(var n=e.attributes,i={},r=n.length;r;){var s=n[--r],o=s.name,a=s.value;i[o]=i,t.getAttribute(o)!=a&&t.setAttribute(o,a)}for(var l=t.attributes,r=l.length;r;){var s=l[--r],o=s.name;i[o]!=i&&t.removeAttribute(o)}}function o(t,e,o){function l(t){for(var e=t.firstChild;e;e=e.nextSibling)if(1==e.nodeType){var n=h(e);n&&(m[n]=e),l(e)}}function u(t,e,n){if(!n){if(f(t,e)===!1)return;if(s(t,e),d(t,e)===!1)return}var i=t.tagName;if("TEXTAREA"!=i){for(var r=t.firstChild,o=r,c=e.firstChild;c;c=c.nextSibling){var v=c.nodeType,_=c.tagName,p=void 0;if(1==v&&(p=h(c),m[p]))t.insertBefore(m[p],r||null),delete m[p];else{for(var g=!1;r;){if(r.nodeType==v&&(1==r.nodeType?r.tagName==_&&h(r)===p&&(g=!0,u(r,c,!1)):(g=!0,r.nodeValue=c.nodeValue)),g){r==o?r=o=o.nextSibling:(t.insertBefore(r,o),r=o);break}r=r.nextSibling}if(!g){switch(c.nodeType){case 1:var y=document.createElement(_);t.insertBefore(y,o||null),p?b[p]={blank:y,source:c}:u(y,c,!1);break;case 3:t.insertBefore(document.createTextNode(c.nodeValue),o||null);break;case 8:t.insertBefore(document.createComment(c.nodeValue),o||null);break;default:throw new TypeError("Unsupported node type")}r=o}}}for(;o;){var E=o;if(o=o.nextSibling,1==E.nodeType){var x=h(E);if(x){var C=b[x];if(C){delete b[x],C.blank.parentNode.replaceChild(E,C.blank),u(E,C.source,!1);continue}m[x]=E}else l(E)}t.removeChild(E)}}var w=a[i];w&&w(t,e)}o||(o={});var c=o.contentOnly===!0,h=o.getElementKey||r,f=o.onBeforeMorphElement||n,d=o.onBeforeMorphElementContent||n,v=o.onKeyedElementRemoved||n,_=document.activeElement,p=void 0,g=void 0;"selectionStart"in _&&(p=_.scrollLeft,g=_.scrollTop);var m=Object.create(null),b=Object.create(null);for(u(t,e,c);!i(b);)for(var y in b){var E=b[y];delete b[y],u(E.blank,E.source,!1)}for(var y in m)v(m[y]);_!=document.activeElement&&(void 0!==p&&(_.scrollLeft=p,_.scrollTop=g),_.focus())}var a={INPUT:function(t,e){t.value!=e.value&&(t.value=e.value),t.checked=e.checked},TEXTAREA:function(t,e){var n=e.value;t.value!=n&&(t.value=n),t.firstChild&&(t.firstChild.nodeValue=n)},OPTION:function(t,e){t.selected=e.selected}};t.exports=o},function(t,e){"use strict";var n={blockNameCase:"camel"};t.exports=n},function(t,e,n){"use strict";var i=n(1),r=i.Map,s=i.utils.createClass,o=window.Set;o&&-1!=o.toString().indexOf("[native code]")||(o=s({constructor:function(){this._entries=new r,this.size=0},has:function(t){return this._entries.has(t)},add:function(t){return this._entries.set(t,t),this.size=this._entries.size,this},"delete":function(t){return this._entries["delete"](t)?(this.size--,!0):!1},clear:function(){this._entries.clear(),this.size=0},forEach:function(t,e){var n=this;null==e&&(e=window),this._entries.forEach(function(i){t.call(e,i,i,n)})}})),t.exports=o},function(t,e,n){"use strict";function i(t){var e=[];return(t.hasAttribute("rt-is")||c(t.tagName))&&e.push(t),e.push.apply(e,t.querySelectorAll(h())),e}function r(t){for(var e=i(t),n=e.length;n;){var r=e[--n];if(!r[u]){var s=c(r.getAttribute("rt-is")||r.tagName);if(s)try{new s(r)}catch(o){a(o)}}}}function s(t){for(var e=i(t),n=e.length;n;){var r=e[--n][u];r&&r.destroy()}}var o=n(1),a=o.utils.logError,l=n(2),u=l.KEY_COMPONENT,c=l.getSubclass,h=l.getSelector;t.exports={applyComponents:r,destroyComponents:s}},function(t,e){"use strict";var n=void 0;document.documentElement.classList?n=function(t,e){return t.classList.contains(e)}:!function(){var t=/\S+/g;n=function(e,n){return-1!=(e.className.match(t)||[]).indexOf(n)}}(),t.exports=n},function(t,e){"use strict";function n(){return String(++i)}var i=0;t.exports=n},function(t,e,n){"use strict";function i(){if(f=!1,c.size||h.size){for(var t=0,e=d.length;e>t;t++)d[t](c,h);c.clear(),h.clear()}}function r(t){h.has(t)?h["delete"](t):(c.add(t),f||(f=!0,l(i)))}function s(t){c.has(t)?c["delete"](t):(h.add(t),f||(f=!0,l(i)))}function o(t){d.push(t)}var a=n(1),l=a.utils.nextTick,u=n(5),c=new u,h=new u,f=!1,d=[],v=window.MutationObserver||window.WebKitMutationObserver,_=document.documentElement;v?document.addEventListener("DOMContentLoaded",function p(){document.removeEventListener("DOMContentLoaded",p);var t=new v(function(t){for(var e=0,n=t.length;n>e;e++){for(var i=t[e],o=i.removedNodes,a=i.addedNodes,l=0,u=o.length;u>l;l++)r(o[l]);for(var c=0,h=a.length;h>c;c++)s(a[c])}});t.observe(_,{childList:!0,subtree:!0})}):(_.addEventListener("DOMNodeRemoved",function(t){r(t.target)},!1),_.addEventListener("DOMNodeInserted",function(t){s(t.target)},!1)),t.exports=o},function(t,e){"use strict";var n=window.requestAnimationFrame;if(!n){for(var i=["webkit","moz","ms","o"],r=0,s=i.length;s>r&&!(n=window[i[r]+"RequestAnimationFrame"]);r++);
n||!function(){var t=0;n=function(e){var n=Date.now(),i=Math.max(1,16-(n-t));setTimeout(function(){e(n+i)},i),t=n+i}}()}t.exports=n}])});