!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("cellx")):"function"==typeof define&&define.amd?define(["cellx"],t):"object"==typeof exports?exports.Rionite=t(require("cellx")):e.Rionite=t(e.cellx)}(this,function(e){return function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return e[i].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";var i=n(1),r=n(3),o=n(10),s=n(11),l=n(25),a=n(26),c=n(28),u=n(29),f=n(30),p=n(8),d=n(9),h=n(5),m=n(6),v=n(7),g=n(18),_=n(19),b=n(17),y=n(14),C=n(24),w=e.exports={DisposableMixin:i,ElementAttributes:r,Component:o,registerComponent:s,KeyedList:l,components:{RtContent:a,RtIfThen:c,RtIfElse:u,RtRepeat:f},utils:{camelize:p,hyphenize:d,escapeHTML:h,unescapeHTML:m,isRegExp:v,pathToJSExpression:g,compilePath:_,compileString:b,defer:y,htmlToFragment:C}};w.Rionite=w},function(e,t,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},r=n(2),o=r.EventEmitter,s=r.utils.nextUID,l=Array.isArray,a=o.extend({constructor:function(){this._disposables={}},listenTo:function(e,t,n,r){var o=this,a=void 0;if(l(e)||e instanceof NodeList||e instanceof HTMLCollection||e.addClass&&e.each){"object"!=("undefined"==typeof t?"undefined":i(t))||l(t)?arguments.length<4&&(r=this):arguments.length<3&&(n=this),a=[];for(var c=0,u=e.length;c<u;c++)a.push(this.listenTo(e[c],t,n,r))}else if("object"==("undefined"==typeof t?"undefined":i(t)))if(a=[],l(t)){arguments.length<4&&(r=this);for(var f=t,p=0,d=f.length;p<d;p++)a.push(this.listenTo(e,f[p],n,r))}else{r=arguments.length<3?this:n;var h=t;for(var m in h)a.push(this.listenTo(e,m,h[m],r))}else{if(arguments.length<4&&(r=this),"object"!=("undefined"==typeof n?"undefined":i(n)))return this._listenTo(e,t,n,r);var v=n;if(a=[],l(v))for(var g=0,_=v.length;g<_;g++)a.push(this.listenTo(e,t,v[g],r));else for(var b in v)a.push(this.listenTo(e[b]("unwrap",0),t,v[b],r))}var y=s(),C=function(){for(var e=a.length;e;)a[--e].stop();delete o._disposables[y]},w=this._disposables[y]={stop:C,dispose:C};return w},_listenTo:function(e,t,n,i){var r=this;if(e instanceof o)e.on(t,n,i);else{if(!e.addEventListener)throw new TypeError("Unable to add a listener");e!==i&&(n=n.bind(i)),e.addEventListener(t,n)}var l=s(),a=function(){r._disposables[l]&&(e instanceof o?e.off(t,n,i):e.removeEventListener(t,n),delete r._disposables[l])},c=this._disposables[l]={stop:a,dispose:a};return c},setTimeout:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e,t){var n=this,i=s(),r=setTimeout(function(){delete n._disposables[i],e.call(n)},t),o=function(){n._disposables[i]&&(clearTimeout(r),delete n._disposables[i])},l=this._disposables[i]={clear:o,dispose:o};return l}),setInterval:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e,t){var n=this,i=s(),r=setInterval(function(){e.call(n)},t),o=function(){n._disposables[i]&&(clearInterval(r),delete n._disposables[i])},l=this._disposables[i]={clear:o,dispose:o};return l}),registerCallback:function(e){function t(){if(r._disposables[i])return delete r._disposables[i],e.apply(r,arguments)}var n=this,i=s(),r=this,o=function(){delete n._disposables[i]};return t.cancel=o,t.dispose=o,this._disposables[i]=t,t},dispose:function(){var e=this._disposables;for(var t in e)e[t].dispose();return this}});e.exports=a},function(t,n){t.exports=e},function(e,t,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},r=n(2),o=r.EventEmitter,s=r.Cell,l=n(4),a=n(8),c=n(9),u=Object.defineProperty,f=o.extend({constructor:function(e){var t=this,n=e.$c,r=n.constructor.elementAttributes,o=function(o){var f=r[o],p="undefined"==typeof f?"undefined":i(f),d=l.get("function"==p?f:p);if(!d)throw new TypeError("Unsupported attribute type");var h=a(o),m=c(o),v=t["_"+h]=t["_"+m]=new s(e.getAttribute(m),{merge:function(e,t){return t&&e===t[0]?t:[e,d[0](e,f)]},onChange:function(e){n.isReady&&n.elementAttributeChanged(m,e.oldValue[1],e.value[1])}}),g={configurable:!0,enumerable:!0,get:function(){return v.get()[1]},set:function(t){t=d[1](t,f),null===t?e.removeAttribute(m):e.setAttribute(m,t),v.set(t)}};u(t,h,g),m!=h&&u(t,m,g)};for(var f in r)o(f)}});e.exports=f},function(e,t,n){"use strict";var i=n(2),r=i.js.Map,o=n(5),s=n(6),l=n(7);e.exports=new r([[Boolean,[function(e){return null!==e&&"no"!=e},function(e){return e?"":null}]],["boolean",[function(e,t){return null!==e?"no"!=e:t},function(e,t){return e?"":t?"no":null}]],[Number,[function(e){return null!==e?+e:void 0},function(e){return void 0!==e?String(+e):null}]],["number",[function(e,t){return null!==e?+e:t},function(e){return void 0!==e?String(+e):null}]],[String,[function(e){return null!==e?e:void 0},function(e){return void 0!==e?String(e):null}]],["string",[function(e,t){return null!==e?e:t},function(e){return void 0!==e?String(e):null}]],[Object,[function(e){return null!==e?Object(Function("return "+s(e)+";")()):void 0},function(e){return null!=e?o(l(e)?e.toString():JSON.stringify(e)):null}]],["object",[function(e,t){return null!==e?Object(Function("return "+s(e)+";")()):t},function(e){return null!=e?o(l(e)?e.toString():JSON.stringify(e)):null}]]])},function(e,t){"use strict";function n(e){return i.test(e)?e.replace(i,function(e){return r[e]}):e}var i=/[&<>"]/g,r=Object.create(null);r["&"]="&amp;",r["<"]="&lt;",r[">"]="&gt;",r['"']="&quot;",e.exports=n},function(e,t){"use strict";function n(e){return i.test(e)?e.replace(i,function(e){return r[e]}):e}var i=/&(?:amp|lt|gt|quot);/g,r=Object.create(null);r["&amp;"]="&",r["&lt;"]="<",r["&gt;"]=">",r["&quot;"]='"',e.exports=n},function(e,t){"use strict";function n(e){return"[object RegExp]"==i.call(e)}var i=Object.prototype.toString;e.exports=n},function(e,t){"use strict";function n(e){return r[e]||(r[e]=e.replace(i,function(e,t){return t.toUpperCase()}))}var i=/[\-_]+([a-z]|$)/g,r=Object.create(null);e.exports=n},function(e,t){"use strict";function n(e){return s[e]||(s[e]=e.replace(i,function(e,t,n){return"-"+t.toLowerCase()+n}).replace(r,function(e,t){return"-"+t.toLowerCase()}).replace(o,""))}var i=/\-?([A-Z])([^A-Z])/g,r=/\-?([A-Z]+)/g,o=/^-/,s=Object.create(null);e.exports=n},function(e,t,n){"use strict";function i(){}function r(){}function o(){}function s(){}function l(){}function a(){}function c(){}var u=n(2),f=u.EventEmitter,p=u.Cell,d=u.js.Symbol,h=u.utils.createClass,m=n(1),v=n(3),g=n(11),_=n(15),b=n(20),y=n(21),C=n(22),w=n(23),x=n(8),E=n(14),T=n(24),S=Object.create,A=Object.getPrototypeOf,M=Object.defineProperty,j=Array.prototype.map,L=d("rawContent"),N=/<(\w+(?:\-\w+)+)([^>]*)\/>/g,O=f.extend({Implements:[m],Static:{extend:function(e,t){t.Extends=this;var n=t.Static||(t.Static={});n.elementIs=e;var i=n.elementAttributes,r=n.props;if(r){if(r.content)throw new TypeError('It is not necessary to declare property "content"');if(r.context)throw new TypeError('It is not necessary to declare property "context"');i||(n.elementAttributes=r)}else i&&(n.props=i);return g(h(t))},template:null,elementIs:void 0,elementExtends:void 0,elementAttributes:null,props:null,assets:null},ownerComponent:null,_parentComponent:null,get parentComponent(){if(void 0!==this._parentComponent)return this._parentComponent;for(var e;e=(e||this.element).parentNode;)if(e.$c)return this._parentComponent=e.$c;return this._parentComponent=null},element:null,get elementAttributes(){var e=new v(this.element);return M(this,"elementAttributes",{configurable:!0,enumerable:!0,writable:!0,value:e}),e},get props(){var e=S(this.elementAttributes);return e.content=null,e.context=null,M(this,"props",{configurable:!0,enumerable:!0,writable:!0,value:e}),e},_elementAttached:null,_bindings:null,initialized:!1,isReady:!1,_blockNameInMarkup:void 0,constructor:function(e,t){if(f.call(this),m.call(this),null==e)e=document.createElement(this.constructor.elementIs);else if("string"==typeof e){var n=this.constructor.elementIs,i=e;e=document.createElement(n),e.innerHTML=i;var r=e.firstChild;r==e.lastChild&&1==r.nodeType&&r.tagName.toLowerCase()==n&&(e=r)}if(this.element=e,M(e,"$c",{value:this}),t){var o=this.props;for(var s in t)o[x(s)]=t[s]}this._elementAttached=new p((!1),{owner:this,onChange:this._onElementAttachedChange}),this.created()},_handleEvent:function(e){if(f.prototype._handleEvent.call(this,e),e.bubbles!==!1&&!e.isPropagationStopped){var t=this.parentComponent;t?t._handleEvent(e):w(e)}},_onElementAttachedChange:function(e){var t=this;if(e.value){this.initialized||(this.initialize(),this.initialized=!0);var n=this.constructor,i=n[L],r=this.element;if(this.isReady)for(var o;o=r.firstChild;)r.removeChild(o);else{for(var l=n;r.classList.add(l.elementIs),l=A(l.prototype).constructor,l!=O;);var a=this.elementAttributes,c=n.elementAttributes;for(var u in c)if("function"!=typeof c[u]){var f=x(u);a[f]=a[f]}if(null!=n.template){if(!i){var p=n.template;"string"!=typeof p&&(p=p.render?p.render(this):p.call(this,this)),i=n[L]=T(p.replace(N,"<$1$2></$1>"))}for(var d,h=this.props.content=document.createDocumentFragment();d=r.firstChild;)h.appendChild(d)}}var m=i&&i.cloneNode(!0);m&&(this._bindings=_(m,this),this.element.appendChild(m)),this.isReady&&this.elementAttached===s||E(function(){var e=t.constructor.assets;t.isReady||(e&&b(t,e),t.ready(),t.isReady=!0),e&&y(t,e),t.elementAttached()})}else this.dispose(),this._destroyBindings(),this.elementDetached()},_destroyBindings:function(){var e=this._bindings;if(e){for(var t=e.length;t;)e[--t].off();this._bindings=null}},created:i,initialize:r,ready:o,elementAttached:s,elementDetached:l,elementMoved:a,elementAttributeChanged:c,$:function(e){var t=this.element.querySelector(this._prepareSelector(e));return t&&(t.$c||t)},$$:function(e){return j.call(this.element.querySelectorAll(this._prepareSelector(e)),function(e){return e.$c||e})},_prepareSelector:function(e){if(e=e.split("&"),1==e.length)return e[0];var t=this._blockNameInMarkup;if(!t){for(var n=this.constructor;;){var i=A(n.prototype).constructor;if(n.template!==i.template){t=n.elementIs;break}if(i==O){t=this.constructor.elementIs;break}n=i}this._blockNameInMarkup=t}return e.join("."+t)}});e.exports=O,document.addEventListener("DOMContentLoaded",function I(){document.removeEventListener("DOMContentLoaded",I),C.forEach(function(e){document.addEventListener(e,w)})})},function(e,t,n){"use strict";function i(e){var t=e.elementIs;if(!t)throw new TypeError('Static property "elementIs" is required');var n=void 0;f.forEach(function(t){u.call(e,t)||(e[t]=(n||(n=c(e.prototype).constructor))[t])});var i=e.elementExtends,r=i?s[i]||window["HTML"+(i.charAt(0).toUpperCase()+i.slice(1))+"Element"]:HTMLElement,p=a(r.prototype);return o(p,l),p._rioniteComponentConstructor=e,s[t]=document.registerElement(t,i?{"extends":i,prototype:p}:{prototype:p}),e}var r=n(2),o=r.utils.mixin,s=n(12),l=n(13),a=Object.create,c=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty,f=["template","elementExtends","elementAttributes","assets"];e.exports=i},function(e,t,n){"use strict";var i=n(2),r=i.utils.mixin;e.exports=r(Object.create(null),{template:window.HTMLTemplateElement||HTMLElement,br:window.HTMLBRElement,caption:window.HTMLTableCaptionElement,col:window.HTMLTableColElement,datalist:window.HTMLDataListElement,dl:window.HTMLDListElement,fieldset:window.HTMLFieldSetElement,frameset:window.HTMLFrameSetElement,hr:window.HTMLHRElement,iframe:window.HTMLIFrameElement,li:window.HTMLLIElement,ol:window.HTMLOListElement,optgroup:window.HTMLOptGroupElement,tbody:window.HTMLTableSectionElement,td:window.HTMLTableCellElement,textarea:window.HTMLTextAreaElement,tfoot:window.HTMLTableSectionElement,thead:window.HTMLTableSectionElement,tr:window.HTMLTableRowElement,ul:window.HTMLUListElement})},function(e,t,n){"use strict";var i=n(2),r=i.utils.nextTick,o=n(14),s=Object.prototype.hasOwnProperty,l={get rioniteComponent(){return this.$c},get $c(){return new this._rioniteComponentConstructor(this)},attachedCallback:function(){var e=this.$c;e._elementAttached.get()?null===e._parentComponent?(e._parentComponent=void 0,e.elementMoved()):e._parentComponent=void 0:(e._parentComponent=void 0,e.parentComponent?e.ownerComponent&&e._elementAttached.set(!0):r(function(){e._parentComponent=void 0,e.parentComponent||e._elementAttached.set(!0)}))},detachedCallback:function(){var e=this.$c;e._parentComponent=null,o(function(){null===e._parentComponent&&e._elementAttached.set(!1)})},attributeChangedCallback:function(e,t,n){if(this.$c.isReady){var i=this.$c.elementAttributes,r="_"+e;s.call(i,r)&&i[r].set(n)}}};e.exports=l},function(e,t,n){"use strict";function i(){var e=l;l=null;for(var t=0,n=e.length;t<n;t++)try{e[t]()}catch(i){s.log(i)}}function r(e){l?l.push(e):(l=[e],setTimeout(i,1))}var o=n(2),s=o.ErrorLogger,l=void 0;e.exports=r},function(e,t,n){"use strict";function i(e,t,n){function i(e){for(var s=function(e){switch(e.nodeType){case 1:for(var s=e.attributes,c=s.length;c;){var u=s.item(--c),f=u.value,p=f.split(a);p.length>1&&!function(){var t=u.name,i=new o(l(p,f),{owner:n,onChange:function(n){var i=n.value;i===!1||null==i?e.removeAttribute(t):e.setAttribute(t,i===!0?"":i)}});f=i.get(),f===!1||null==f?e.removeAttribute(t):e.setAttribute(t,f===!0?"":f),r.push(i)}()}var d=e.$c;d&&(d.ownerComponent=t,d._parentComponent=void 0,d.props.context=n,d._elementAttached.set(!0)),!e.firstChild||d&&null!=d.constructor.template||i(e);break;case 3:var h=e.textContent,m=h.split(a);if(m.length>1){var v=new o(l(m,h),{owner:n,onChange:function(t){e.textContent=t.value}});e.textContent=v.get(),r.push(v)}}},c=e.firstChild;c;c=c.nextSibling)s(c)}n||(n=t);var r=[];return i(e),r.length?r:null}var r=n(2),o=r.Cell,s=n(16),l=n(17),a=RegExp("\\{\\s*("+s+")\\s*\\}","g");e.exports=i},function(e,t){"use strict";e.exports="[$\\w]+(?:\\??\\.[$\\w]+)*"},function(e,t,n){"use strict";function i(e,t){if(a[t])return a[t];if(3==e.length&&""==e[0]&&""==e[2])return a[t]=o(e[1]);for(var n=!1,i=[],c=0,u=e.length;c<u;c++){var f=e[c];if(c%2){var p=r(f);p[1]&&(n=!0),i.push(p[0])}else f&&i.push("'"+(s.test(f)?f.replace(s,function(e){return l[e]}):f)+"'")}return a[t]=Function((n?"var temp; ":"")+"return ["+i.join(", ")+"].join('');")}var r=n(18),o=n(19),s=/['\r\n]/g,l=Object.create(null);l["'"]="\\'",l["\r"]="\\r",l["\n"]="\\n";var a=Object.create(null);e.exports=i},function(e,t){"use strict";function n(e){if(i[e])return i[e];e=e.split("?");var t=e.length;if(1==t)return["this."+e[0],!1];for(var n=t-2,r=Array(n);n;)r[--n]=" && (temp = temp"+e[n+1]+")";return i[e]=["(temp = this."+e[0]+")"+r.join("")+" && temp"+e[t-1],!0]}var i=Object.create(null);e.exports=n},function(e,t,n){"use strict";function i(e){if(o[e])return o[e];var t=r(e);return o[e]=Function((t[1]?"var temp; ":"")+"return "+t[0]+";")}var r=n(18),o=Object.create(null);e.exports=i},function(e,t,n){"use strict";function i(e,t){for(var n in t)o.call(t,n)&&":"!=n.charAt(0)&&(e[n]=e.$(t[n].selector||"&__"+r(n)))}var r=n(9),o=Object.prototype.hasOwnProperty;e.exports=i},function(e,t){"use strict";function n(e,t){for(var n in t)if(i.call(t,n)){var r=void 0;if(":component"==n)r=e;else if(":element"==n)r=e.element;else if(r=e[n],!r)throw new TypeError('Asset "'+n+'" is not defined');var o=t[n];for(var s in o)i.call(o,s)&&s.length>3&&"on-"==s.slice(0,3)&&e.listenTo(r,s.slice(3),o[s])}}var i=Object.prototype.hasOwnProperty;e.exports=n},function(e,t){"use strict";e.exports=["click","dblclick","mousedown","mouseup","input","change","submit","focusin","focusout"]},function(e,t){"use strict";function n(e){var t=void 0,n=void 0,i=[];for(e instanceof Event?(t=e.target,n="rt-"+e.type):(t=e.target.element,n="rt-component-"+e.type);1==t.nodeType&&t.hasAttribute(n)&&i.unshift(t),t=t.parentNode,t;){var r=t.$c;if(r)for(var o=i.length;o;){var s=i[--o],l=r[s.getAttribute(n)];"function"==typeof l&&(l.call(r,e,s),i.splice(o,1))}}}e.exports=n},function(e,t){"use strict";var n=document.createRange(),i=void 0;n.createContextualFragment?!function(){var e=!1;i=function(t){return e||(n.selectNode(document.body),e=!0),n.createContextualFragment(t)}}():i=function(e){var t=document.createElement("div"),n=document.createDocumentFragment();t.innerHTML=e;for(var i;i=t.firstChild;)n.appendChild(i);return n},e.exports=i},function(e,t,n){"use strict";var i=n(2),r=i.ObservableList,o=i.utils.nextUID,s=r.prototype,l=s._registerValue,a=s._unregisterValue,c=s.get,u=s.set,f=s.setRange,p=s.add,d=s._addRange,h=s.insert,m=s.insertRange,v=Object.create,g=Object.defineProperty,_=r.extend({constructor:function(e,t){this._itemsByKey=v(null),this._keyName=t&&t.keyName||"id",r.call(this,e,t)},_registerValue:function(e){this._itemsByKey[e[this._keyName]]=e,l.call(this,e)},_unregisterValue:function(e){delete this._itemsByKey[e[this._keyName]],a.call(this,e)},_checkValues:function(e){for(var t=0,n=e.length;t<n;t++)this._checkValue(e[t])},_checkValue:function(e){if(e!==Object(e))throw new TypeError("Value must be an object");var t=e[this._keyName];if(null==t){do t=o();while(this._itemsByKey[t]);g(e,this._keyName,{configurable:!1,enumerable:!1,writable:!1,value:t})}else if(this._itemsByKey[t])throw new TypeError("Key of value must be unique")},get:function(e){return"string"==typeof e?this._itemsByKey[e]:c.call(this,e)},set:function(e,t){return this._checkValue(t),u.call(this,e,t)},setRange:function(e,t){return this._checkValues(t),f.call(this,e,t)},add:function(e){return this._checkValue(e),p.call(this,e)},_addRange:function(e){this._checkValues(e),d.call(this,e)},insert:function(e,t){return this._checkValue(t),h.call(this,e,t)},insertRange:function(e,t){return this._checkValues(t),m.call(this,e,t)}});e.exports=_},function(e,t,n){"use strict";var i=n(2),r=i.js.Symbol,o=n(15),s=n(10),l=n(27).templateTagSupported,a=r("templatesFixed");e.exports=s.extend("rt-content",{Static:{template:"",elementAttributes:{select:String}},_rawContent:void 0,_onElementAttachedChange:function(e){if(e.value){var t=this.ownerComponent,n=this.element,i=this.props;if(this.isReady)for(var r;r=n.firstChild;)n.removeChild(r);else{for(var s,c=i.content=document.createDocumentFragment();s=n.firstChild;)c.appendChild(s);var u=t.props.content,f=this.elementAttributes.select;if(f){if(!l&&!u[a]){for(var p=u.querySelectorAll("template"),d=p.length;d;)p[--d].content;u[a]=!0}var h=u.querySelectorAll(f),m=h.length;if(m)for(var v=this._rawContent=document.createDocumentFragment(),g=0;g<m;g++)v.appendChild(h[g].cloneNode(!0));else this._rawContent=c}else this._rawContent=u.firstChild?u:c;this.isReady=!0}var _=this._rawContent.cloneNode(!0);this._bindings=this._rawContent==i.content?o(_,t,i.context):o(_,t.ownerComponent,t.props.context),n.appendChild(_)}else this._destroyBindings()}})},function(e,t){"use strict";var n=document.createElement("div");n.innerHTML="<template>1</template>";var i=n.firstChild;t.templateTagSupported=!i.firstChild},function(e,t,n){"use strict";var i=n(2),r=i.Cell,o=n(15),s=n(10),l=n(16),a=n(19),c=Array.prototype.slice,u=RegExp("^\\s*("+l+")\\s*$");e.exports=s.extend("rt-if-then",{Static:{elementExtends:"template",elementAttributes:{"if":String}},_if:null,_elseMode:!1,_nodes:null,_onElementAttachedChange:function(e){var t=this;if(e.value)this.initialized||!function(){var e=t.props;if(e.content=document.importNode(t.element.content,!0),!u.test(e["if"]))throw new SyntaxError('Invalid value of attribute "if"');var n=a(RegExp.$1);t._if=new r(t._elseMode?function(){return!n.call(this)}:function(){return!!n.call(this)},{owner:e.context}),t.initialized=!0}(),this._renderElement(),this._if.on("change",this._onIfChange,this);else{this._destroyBindings(),this._if.off("change",this._onIfChange,this);var n=this._nodes;if(n)for(var i=n.length;i;){var o=n[--i],s=o.parentNode;s&&s.removeChild(o)}}},_onIfChange:function(){this._renderElement()},_renderElement:function(){if(this._if.get()){var e=this.props.content.cloneNode(!0);this._nodes=c.call(e.childNodes),this._bindings=o(e,this.ownerComponent,this.props.context),this.element.parentNode.insertBefore(e,this.element.nextSibling)}else{this._destroyBindings();var t=this._nodes;if(t){for(var n=t.length;n;){var i=t[--n];i.parentNode.removeChild(i)}this._nodes=null}}this.emit("change")}})},function(e,t,n){"use strict";var i=n(28);e.exports=i.extend("rt-if-else",{Static:{elementExtends:"template"},_elseMode:!0})},function(e,t,n){"use strict";function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=n(2),o=r.Cell,s=r.js.Map,l=n(15),a=n(10),c=n(31),u=n(16),f=n(19),p=Object.create,d=Array.prototype.slice,h=RegExp("^\\s*("+c+")\\s+of\\s+("+u+")\\s*$");e.exports=a.extend("rt-repeat",{Static:{elementExtends:"template",elementAttributes:{"for":String,trackBy:String,strip:!1}},_itemName:void 0,_list:null,_itemMap:null,_oldItemMap:null,_trackBy:void 0,_rawContent:null,_context:null,_lastNode:null,_onElementAttachedChange:function(e){if(e.value){if(!this.initialized){var t=this.props,n=t.content=document.importNode(this.element.content,!0);if(t.strip){var i=n.firstChild,r=n.lastChild;i==r?3==i.nodeType&&(i.textContent=i.textContent.trim()):(3==i.nodeType&&((i.textContent=i.textContent.replace(/^\s+/,""))||n.removeChild(i)),3==r.nodeType&&((r.textContent=r.textContent.replace(/\s+$/,""))||n.removeChild(r)))}var l=t["for"].match(h);if(!l)throw new SyntaxError('Invalid value of attribute "for"');this._itemName=l[1],this._list=new o(f(l[2]),{owner:t.context}),this._itemMap=new s,this._trackBy=t.trackBy,this._rawContent=n,this._context=t.context,this.initialized=!0}this._renderElement(),this._list.on("change",this._onListChange,this)}else this._clearItemMap(this._itemMap),this._list.off("change",this._onListChange,this)},_onListChange:function(){this._renderElement()},_renderElement:function(){var e=this,t=this._oldItemMap=this._itemMap;this._itemMap=new s;var n=this._list.get(),i=void 0;if(n&&(this._lastNode=this.element,i=n.reduce(function(t,n,i){return e._renderListItem(n,i)||t},!1)),t.size)this._clearItemMap(t);else if(!i)return;this.emit("change")},_renderListItem:function(e,t){var n,r=this._trackBy,s=r?"$index"==r?t:e[r]:e,a=this._oldItemMap.get(s),c=this._itemMap.get(s);if(a){var u=void 0;1==a.length?(u=a[0],this._oldItemMap["delete"](s)):u=a.shift(),c?c.push(u):this._itemMap.set(s,[u]),u.item.set(e);var f=u.nodes;if(t==u.index.get())return this._lastNode=f[f.length-1],!1;if(u.index.set(t),1==f.length){var h=f[0];this._lastNode.parentNode.insertBefore(h,this._lastNode.nextSibling),this._lastNode=h}else{for(var m=document.createDocumentFragment(),v=0,g=f.length;v<g;v++)m.appendChild(f[v]);var _=m.lastChild;this._lastNode.parentNode.insertBefore(m,this._lastNode.nextSibling),this._lastNode=_}return!0}e=new o(e),t=new o(t);var b=this._rawContent.cloneNode(!0),y=p(this._context,(n={},i(n,this._itemName,{get:function(){return e.get()}}),i(n,"$index",{get:function(){return t.get()}}),n)),C={item:e,index:t,nodes:d.call(b.childNodes),bindings:l(b,this.ownerComponent,y)};c?c.push(C):this._itemMap.set(s,[C]);var w=b.lastChild;return this._lastNode.parentNode.insertBefore(b,this._lastNode.nextSibling),this._lastNode=w,!0},_clearItemMap:function(e){e.forEach(this._clearItems,this),e.clear()},_clearItems:function(e){for(var t=e.length;t;){var n=e[--t],i=n.bindings;if(i)for(var r=i.length;r;)i[--r].off();for(var o=n.nodes,s=o.length;s;){var l=o[--s],a=l.parentNode;a&&a.removeChild(l)}}}})},function(e,t){"use strict";e.exports="[$_a-zA-Z][$\\w]*"}])});