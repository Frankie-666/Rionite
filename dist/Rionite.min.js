!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("cellx")):"function"==typeof define&&define.amd?define(["cellx"],e):"object"==typeof exports?exports.Rionite=e(require("cellx")):t.Rionite=e(t.cellx)}(this,function(t){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";var r=n(1),i=n(3),o=n(5),s=n(12),l=n(13),a=n(27),c=n(28),u=n(30),p=n(31),f=n(32),h=n(10),d=n(11),m=n(4),v=n(7),_=n(8),g=n(9),b=n(20),y=n(21),C=n(19),x=n(16),w=n(26),E=t.exports={DisposableMixin:r,Template:i,ElementAttributes:o,Component:s,registerComponent:l,KeyedList:a,t:function(t){return new i(t)},components:{RtContent:c,RtIfThen:u,RtIfElse:p,RtRepeat:f},utils:{camelize:h,hyphenize:d,escapeString:m,escapeHTML:v,unescapeHTML:_,isRegExp:g,pathToJSExpression:b,compilePath:y,compileString:C,defer:x,htmlToFragment:w}};E.Rionite=E},function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},i=n(2),o=i.EventEmitter,s=i.utils.nextUID,l=o.extend({constructor:function(){this._disposables={}},listenTo:function(t,e,n,i){var o=this,l=void 0;if(Array.isArray(t)||t instanceof NodeList||t instanceof HTMLCollection||t.addClass&&t.each){"object"!=("undefined"==typeof e?"undefined":r(e))||Array.isArray(e)?arguments.length<4&&(i=this):arguments.length<3&&(n=this),l=[];for(var a=0,c=t.length;a<c;a++)l.push(this.listenTo(t[a],e,n,i))}else if("object"==("undefined"==typeof e?"undefined":r(e)))if(l=[],Array.isArray(e)){arguments.length<4&&(i=this);for(var u=e,p=0,f=u.length;p<f;p++)l.push(this.listenTo(t,u[p],n,i))}else{i=arguments.length<3?this:n;var h=e;for(var d in h)l.push(this.listenTo(t,d,h[d],i))}else{if(arguments.length<4&&(i=this),"object"!=("undefined"==typeof n?"undefined":r(n)))return this._listenTo(t,e,n,i);var m=n;if(l=[],Array.isArray(m))for(var v=0,_=m.length;v<_;v++)l.push(this.listenTo(t,e,m[v],i));else for(var g in m)l.push(this.listenTo(t[g]("unwrap",0),e,m[g],i))}var b=s(),y=function(){for(var t=l.length;t;)l[--t].stop();delete o._disposables[b]},C=this._disposables[b]={stop:y,dispose:y};return C},_listenTo:function(t,e,n,r){var i=this;if(t instanceof o)t.on(e,n,r);else{if(!t.addEventListener)throw new TypeError("Unable to add a listener");t!==r&&(n=n.bind(r)),t.addEventListener(e,n)}var l=s(),a=function(){i._disposables[l]&&(t instanceof o?t.off(e,n,r):t.removeEventListener(e,n),delete i._disposables[l])},c=this._disposables[l]={stop:a,dispose:a};return c},setTimeout:function(t){function e(e,n){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(t,e){var n=this,r=s(),i=setTimeout(function(){delete n._disposables[r],t.call(n)},e),o=function(){n._disposables[r]&&(clearTimeout(i),delete n._disposables[r])},l=this._disposables[r]={clear:o,dispose:o};return l}),setInterval:function(t){function e(e,n){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(t,e){var n=this,r=s(),i=setInterval(function(){t.call(n)},e),o=function(){n._disposables[r]&&(clearInterval(i),delete n._disposables[r])},l=this._disposables[r]={clear:o,dispose:o};return l}),registerCallback:function(t){function e(){if(i._disposables[r])return delete i._disposables[r],t.apply(i,arguments)}var n=this,r=s(),i=this,o=function(){delete n._disposables[r]};return e.cancel=o,e.dispose=o,this._disposables[r]=e,e},dispose:function(){var t=this._disposables;for(var e in t)t[e].dispose();return this}});t.exports=l},function(e,n){e.exports=t},function(t,e,n){"use strict";function r(t,e){var n=this,r={js:[]},s=[r],l=this._blocks=Object.create(e?e._blocks:null);this.parent=e,t=t.split(o);for(var a=0,c=t.length;a<c;)if(a%4){var u=t[a];u?(r.js.push("this."+u+"()"),r={name:u,js:[]},s.push(r),l[u]=r):t[a+1]?s.length>1&&(s.pop(),r=s[s.length-1]):e&&(1==s.length?r.js.push("parent.render()"):e._blocks[r.name]&&r.js.push("_super()")),a+=3}else r.js.push("'"+i(t[a])+"'"),a++;Object.keys(l).forEach(function(t){var r=e&&e._blocks[t],i=Function("_super","return "+l[t].js.join(" + ")+";");l[t]=function(){return i.call(n._blocks,r)}}),this._fn=Function("parent","return "+s[0].js.join(" + ")+";")}var i=n(4),o=/{{\s*(?:block\s+([$_a-zA-Z][$\w]*)|(\/)block|(s)uper)\s*}}/;r.prototype.extend=function(t){return new r(t,this)},r.prototype.render=function(){return this._fn.call(this._blocks,this.parent)},t.exports=r},function(t,e){"use strict";function n(t){return r.test(t)?t.replace(r,function(t){return i[t]}):t}var r=/[\\'\r\n]/g,i=Object.create(null);i["\\"]="\\\\",i["'"]="\\'",i["\r"]="\\r",i["\n"]="\\n",t.exports=n},function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},i=n(2),o=i.EventEmitter,s=i.Cell,l=n(6),a=n(10),c=n(11),u=o.extend({constructor:function(t){var e=this,n=t.$c,i=n.constructor.elementAttributes,o=function(o){var u=i[o],p="undefined"==typeof u?"undefined":r(u),f=l.get("function"==p?u:p);if(!f)throw new TypeError("Unsupported attribute type");var h=a(o),d=c(o),m=e["_"+h]=e["_"+d]=new s(t.getAttribute(d),{merge:function(t,e){return e&&t===e[0]?e:[t,f[0](t,u)]},onChange:function(t){n.isReady&&n.elementAttributeChanged(d,t.oldValue[1],t.value[1])}}),v={configurable:!0,enumerable:!0,get:function(){return m.get()[1]},set:function(e){e=f[1](e,u),null===e?t.removeAttribute(d):t.setAttribute(d,e),m.set(e)}};Object.defineProperty(e,h,v),d!=h&&Object.defineProperty(e,d,v)};for(var u in i)o(u)}});t.exports=u},function(t,e,n){"use strict";var r=n(2),i=r.js.Map,o=n(7),s=n(8),l=n(9);t.exports=new i([[Boolean,[function(t){return null!==t&&"no"!=t},function(t){return t?"":null}]],["boolean",[function(t,e){return null!==t?"no"!=t:e},function(t,e){return t?"":e?"no":null}]],[Number,[function(t){return null!==t?+t:void 0},function(t){return void 0!==t?String(+t):null}]],["number",[function(t,e){return null!==t?+t:e},function(t){return void 0!==t?String(+t):null}]],[String,[function(t){return null!==t?t:void 0},function(t){return void 0!==t?String(t):null}]],["string",[function(t,e){return null!==t?t:e},function(t){return void 0!==t?String(t):null}]],[Object,[function(t){return null!==t?Object(Function("return "+s(t)+";")()):void 0},function(t){return null!=t?o(l(t)?t.toString():JSON.stringify(t)):null}]],["object",[function(t,e){return null!==t?Object(Function("return "+s(t)+";")()):e},function(t){return null!=t?o(l(t)?t.toString():JSON.stringify(t)):null}]]])},function(t,e){"use strict";function n(t){return r.test(t)?t.replace(r,function(t){return i[t]}):t}var r=/[&<>"]/g,i=Object.create(null);i["&"]="&amp;",i["<"]="&lt;",i[">"]="&gt;",i['"']="&quot;",t.exports=n},function(t,e){"use strict";function n(t){return r.test(t)?t.replace(r,function(t){return i[t]}):t}var r=/&(?:amp|lt|gt|quot);/g,i=Object.create(null);i["&amp;"]="&",i["&lt;"]="<",i["&gt;"]=">",i["&quot;"]='"',t.exports=n},function(t,e){"use strict";function n(t){return"[object RegExp]"==r.call(t)}var r=Object.prototype.toString;t.exports=n},function(t,e){"use strict";function n(t){return i[t]||(i[t]=t.replace(r,function(t,e){return e.toUpperCase()}))}var r=/[\-_]+([a-z]|$)/g,i=Object.create(null);t.exports=n},function(t,e){"use strict";function n(t){return s[t]||(s[t]=t.replace(r,function(t,e,n){return"-"+e.toLowerCase()+n}).replace(i,function(t,e){return"-"+e.toLowerCase()}).replace(o,""))}var r=/\-?([A-Z])([^A-Z])/g,i=/\-?([A-Z]+)/g,o=/^-/,s=Object.create(null);t.exports=n},function(t,e,n){"use strict";function r(){}function i(){}function o(){}function s(){}function l(){}function a(){}function c(){}var u=n(2),p=u.EventEmitter,f=u.Cell,h=u.js.Symbol,d=u.utils.createClass,m=n(1),v=n(5),_=n(13),g=n(17),b=n(22),y=n(23),C=n(24),x=n(25),w=n(10),E=n(16),j=n(26),T=Array.prototype.map,A=h("rawContent"),S=/<(\w+(?:\-\w+)+)([^>]*)\/>/g,M=p.extend({Implements:[m],Static:{extend:function(t,e){e.Extends=this;var n=e.Static||(e.Static={});n.elementIs=t;var r=n.props;if(r){if(r.content)throw new TypeError('It is not necessary to declare property "content"');if(r.context)throw new TypeError('It is not necessary to declare property "context"');n.elementAttributes=r}else n.elementAttributes&&(n.props=n.elementAttributes);return _(d(e))},template:null,elementIs:void 0,elementExtends:void 0,elementAttributes:null,props:null,assets:null},ownerComponent:null,_parentComponent:null,get parentComponent(){if(void 0!==this._parentComponent)return this._parentComponent;for(var t;t=(t||this.element).parentNode;)if(t.$c)return this._parentComponent=t.$c;return this._parentComponent=null},element:null,get elementAttributes(){var t=new v(this.element);return Object.defineProperty(this,"elementAttributes",{configurable:!0,enumerable:!0,writable:!0,value:t}),t},get props(){var t=Object.create(this.elementAttributes);return t.content=null,t.context=null,Object.defineProperty(this,"props",{configurable:!0,enumerable:!0,writable:!0,value:t}),t},_elementAttached:null,_bindings:null,initialized:!1,isReady:!1,_blockNameInMarkup:void 0,constructor:function(t,e){if(p.call(this),m.call(this),null==t)t=document.createElement(this.constructor.elementIs);else if("string"==typeof t){var n=this.constructor.elementIs,r=t;t=document.createElement(n),t.innerHTML=r;var i=t.firstChild;i==t.lastChild&&1==i.nodeType&&i.tagName.toLowerCase()==n&&(t=i)}if(this.element=t,Object.defineProperty(t,"$c",{value:this}),e){var o=this.props;for(var s in e)o[w(s)]=e[s]}this._elementAttached=new f((!1),{owner:this,onChange:this._onElementAttachedChange}),this.created()},_handleEvent:function(t){if(p.prototype._handleEvent.call(this,t),t.bubbles!==!1&&!t.isPropagationStopped){var e=this.parentComponent;e?e._handleEvent(t):x(t)}},_onElementAttachedChange:function(t){var e=this;if(t.value){this.initialized||(this.initialize(),this.initialized=!0);var n=this.constructor,r=n[A],i=this.element;if(this.isReady)for(var o;o=i.firstChild;)i.removeChild(o);else{for(var l=n;i.classList.add(l.elementIs),l=Object.getPrototypeOf(l.prototype).constructor,l!=M;);var a=this.elementAttributes,c=n.elementAttributes;for(var u in c)if("function"!=typeof c[u]){var p=w(u);a[p]=a[p]}if(null!=n.template){if(!r){var f=n.template;"string"!=typeof f&&(f=f.render?f.render(this):f.call(this,this)),r=n[A]=j(f.replace(S,"<$1$2></$1>"))}for(var h,d=this.props.content=document.createDocumentFragment();h=i.firstChild;)d.appendChild(h)}}var m=r&&r.cloneNode(!0);m&&(this._bindings=g(m,this),this.element.appendChild(m)),this.isReady&&this.elementAttached===s||E(function(){var t=e.constructor.assets;e.isReady||(t&&b(e,t),e.ready(),e.isReady=!0),t&&y(e,t),e.elementAttached()})}else this.dispose(),this._destroyBindings(),this.elementDetached()},_destroyBindings:function(){var t=this._bindings;if(t){for(var e=t.length;e;)t[--e].off();this._bindings=null}},created:r,initialize:i,ready:o,elementAttached:s,elementDetached:l,elementMoved:a,elementAttributeChanged:c,$:function(t){var e=this.element.querySelector(this._prepareSelector(t));return e&&(e.$c||e)},$$:function(t){return T.call(this.element.querySelectorAll(this._prepareSelector(t)),function(t){return t.$c||t})},_prepareSelector:function(t){if(t=t.split("&"),1==t.length)return t[0];var e=this._blockNameInMarkup;if(!e){for(var n=this.constructor;;){var r=Object.getPrototypeOf(n.prototype).constructor;if(n.template!==r.template){e=n.elementIs;break}if(r==M){e=this.constructor.elementIs;break}n=r}this._blockNameInMarkup=e}return t.join("."+e)}});t.exports=M,document.addEventListener("DOMContentLoaded",function L(){document.removeEventListener("DOMContentLoaded",L),C.forEach(function(t){document.addEventListener(t,x)})})},function(t,e,n){"use strict";function r(t){var e=t.elementIs;if(!e)throw new TypeError('Static property "elementIs" is required');var n=void 0;c.forEach(function(e){a.call(t,e)||(t[e]=(n||(n=Object.getPrototypeOf(t.prototype).constructor))[e])});var r=t.elementExtends,i=r?s[r]||window["HTML"+(r.charAt(0).toUpperCase()+r.slice(1))+"Element"]:HTMLElement,u=Object.create(i.prototype);return o(u,l),u._rioniteComponentConstructor=t,s[e]=document.registerElement(e,r?{"extends":r,prototype:u}:{prototype:u}),t}var i=n(2),o=i.utils.mixin,s=n(14),l=n(15),a=Object.prototype.hasOwnProperty,c=["template","elementExtends","elementAttributes","assets"];t.exports=r},function(t,e,n){"use strict";var r=n(2),i=r.utils.mixin;t.exports=i(Object.create(null),{template:window.HTMLTemplateElement||HTMLElement,br:window.HTMLBRElement,caption:window.HTMLTableCaptionElement,col:window.HTMLTableColElement,datalist:window.HTMLDataListElement,dl:window.HTMLDListElement,fieldset:window.HTMLFieldSetElement,frameset:window.HTMLFrameSetElement,hr:window.HTMLHRElement,iframe:window.HTMLIFrameElement,li:window.HTMLLIElement,ol:window.HTMLOListElement,optgroup:window.HTMLOptGroupElement,tbody:window.HTMLTableSectionElement,td:window.HTMLTableCellElement,textarea:window.HTMLTextAreaElement,tfoot:window.HTMLTableSectionElement,thead:window.HTMLTableSectionElement,tr:window.HTMLTableRowElement,ul:window.HTMLUListElement})},function(t,e,n){"use strict";var r=n(2),i=r.utils.nextTick,o=n(16),s=Object.prototype.hasOwnProperty,l={get rioniteComponent(){return this.$c},get $c(){return new this._rioniteComponentConstructor(this)},attachedCallback:function(){var t=this.$c;t._elementAttached.get()?null===t._parentComponent?(t._parentComponent=void 0,t.elementMoved()):t._parentComponent=void 0:(t._parentComponent=void 0,t.parentComponent?t.ownerComponent&&t._elementAttached.set(!0):i(function(){t._parentComponent=void 0,t.parentComponent||t._elementAttached.set(!0)}))},detachedCallback:function(){var t=this.$c;t._parentComponent=null,o(function(){null===t._parentComponent&&t._elementAttached.set(!1)})},attributeChangedCallback:function(t,e,n){if(this.$c.isReady){var r=this.$c.elementAttributes,i="_"+t;s.call(r,i)&&r[i].set(n)}}};t.exports=l},function(t,e,n){"use strict";function r(){var t=l;l=null;for(var e=0,n=t.length;e<n;e++)try{t[e]()}catch(r){s.log(r)}}function i(t){l?l.push(t):(l=[t],setTimeout(r,1))}var o=n(2),s=o.ErrorLogger,l=void 0;t.exports=i},function(t,e,n){"use strict";function r(t,e,n){function r(t){for(var s=function(t){switch(t.nodeType){case 1:for(var s=t.attributes,c=s.length;c;){var u=s.item(--c),p=u.value,f=p.split(a);f.length>1&&!function(){var e=u.name,r=new o(l(f,p),{owner:n,onChange:function(n){var r=n.value;r===!1||null==r?t.removeAttribute(e):t.setAttribute(e,r===!0?"":r)}});p=r.get(),p===!1||null==p?t.removeAttribute(e):t.setAttribute(e,p===!0?"":p),i.push(r)}()}var h=t.$c;h&&(h.ownerComponent=e,h._parentComponent=void 0,h.props.context=n,h._elementAttached.set(!0)),!t.firstChild||h&&null!=h.constructor.template||r(t);break;case 3:var d=t.textContent,m=d.split(a);if(m.length>1){var v=new o(l(m,d),{owner:n,onChange:function(e){t.textContent=e.value}});t.textContent=v.get(),i.push(v)}}},c=t.firstChild;c;c=c.nextSibling)s(c)}n||(n=e);var i=[];return r(t),i.length?i:null}var i=n(2),o=i.Cell,s=n(18),l=n(19),a=RegExp("\\{\\s*("+s+")\\s*\\}","g");t.exports=r},function(t,e){"use strict";t.exports="[$\\w]+(?:\\??\\.[$\\w]+)*"},function(t,e,n){"use strict";function r(t,e){if(l[e])return l[e];if(3==t.length&&""==t[0]&&""==t[2])return l[e]=s(t[1]);for(var n=!1,r=[],a=0,c=t.length;a<c;a++){var u=t[a];if(a%2){var p=i(u);p[1]&&(n=!0),r.push(p[0])}else u&&r.push("'"+o(u)+"'")}return l[e]=Function((n?"var temp; ":"")+"return ["+r.join(", ")+"].join('');")}var i=n(20),o=n(4),s=n(21),l=Object.create(null);t.exports=r},function(t,e){"use strict";function n(t){if(r[t])return r[t];t=t.split("?");var e=t.length;if(1==e)return["this."+t[0],!1];for(var n=e-2,i=Array(n);n;)i[--n]=" && (temp = temp"+t[n+1]+")";return r[t]=["(temp = this."+t[0]+")"+i.join("")+" && temp"+t[e-1],!0]}var r=Object.create(null);t.exports=n},function(t,e,n){"use strict";function r(t){if(o[t])return o[t];var e=i(t);return o[t]=Function((e[1]?"var temp; ":"")+"return "+e[0]+";")}var i=n(20),o=Object.create(null);t.exports=r},function(t,e,n){"use strict";function r(t,e){for(var n in e)o.call(e,n)&&":"!=n.charAt(0)&&(t[n]=t.$(e[n].selector||"&__"+i(n)))}var i=n(11),o=Object.prototype.hasOwnProperty;t.exports=r},function(t,e){"use strict";function n(t,e){for(var n in e)if(r.call(e,n)){var i=void 0;if(":component"==n)i=t;else if(":element"==n)i=t.element;else if(i=t[n],!i)continue;var o=e[n];for(var s in o)r.call(o,s)&&s.length>3&&"on-"==s.slice(0,3)&&t.listenTo(i,s.slice(3),o[s])}}var r=Object.prototype.hasOwnProperty;t.exports=n},function(t,e){"use strict";t.exports=["click","dblclick","mousedown","mouseup","input","change","submit","focusin","focusout"]},function(t,e){"use strict";function n(t){var e=void 0,n=void 0,r=[];for(t instanceof Event?(e=t.target,n="rt-"+t.type):(e=t.target.element,n="rt-component-"+t.type);1==e.nodeType&&e.hasAttribute(n)&&r.unshift(e),e=e.parentNode,e;){var i=e.$c;if(i)for(var o=r.length;o;){var s=r[--o],l=i[s.getAttribute(n)];"function"==typeof l&&(l.call(i,t,s),r.splice(o,1))}}}t.exports=n},function(t,e){"use strict";var n=document.createRange(),r=void 0;n.createContextualFragment?!function(){var t=!1;r=function(e){return t||(n.selectNode(document.body),t=!0),n.createContextualFragment(e)}}():r=function(t){var e=document.createElement("div"),n=document.createDocumentFragment();e.innerHTML=t;for(var r;r=e.firstChild;)n.appendChild(r);return n},t.exports=r},function(t,e,n){"use strict";var r=n(2),i=r.ObservableList,o=r.utils.nextUID,s=i.prototype,l=s._registerValue,a=s._unregisterValue,c=s.get,u=s.set,p=s.setRange,f=s.add,h=s._addRange,d=s.insert,m=s.insertRange,v=i.extend({constructor:function(t,e){this._itemsByKey=Object.create(null),this._keyName=e&&e.keyName||"id",i.call(this,t,e)},_registerValue:function(t){this._itemsByKey[t[this._keyName]]=t,l.call(this,t)},_unregisterValue:function(t){delete this._itemsByKey[t[this._keyName]],a.call(this,t)},_checkValues:function(t){for(var e=0,n=t.length;e<n;e++)this._checkValue(t[e])},_checkValue:function(t){if(t!==Object(t))throw new TypeError("Value must be an object");var e=t[this._keyName];if(null==e){do e=o();while(this._itemsByKey[e]);Object.defineProperty(t,this._keyName,{configurable:!1,enumerable:!1,writable:!1,value:e})}else if(this._itemsByKey[e])throw new TypeError("Key of value must be unique")},get:function(t){return"string"==typeof t?this._itemsByKey[t]:c.call(this,t)},set:function(t,e){return this._checkValue(e),u.call(this,t,e)},setRange:function(t,e){return this._checkValues(e),p.call(this,t,e)},add:function(t){return this._checkValue(t),f.call(this,t)},_addRange:function(t){this._checkValues(t),h.call(this,t)},insert:function(t,e){return this._checkValue(e),d.call(this,t,e)},insertRange:function(t,e){return this._checkValues(e),m.call(this,t,e)}});t.exports=v},function(t,e,n){"use strict";var r=n(2),i=r.js.Symbol,o=n(17),s=n(12),l=n(29).templateTagSupported,a=i("templatesFixed");t.exports=s.extend("rt-content",{Static:{template:"",elementAttributes:{select:String,getContext:String}},_rawContent:void 0,_onElementAttachedChange:function(t){if(t.value){var e=this.ownerComponent,n=this.element,r=this.props;if(this.isReady)for(var i;i=n.firstChild;)n.removeChild(i);else{for(var s,c=r.content=document.createDocumentFragment();s=n.firstChild;)c.appendChild(s);var u=e.props.content,p=this.elementAttributes.select;if(p){if(!l&&!u[a]){for(var f=u.querySelectorAll("template"),h=f.length;h;)f[--h].content;u[a]=!0}var d=u.querySelectorAll(p),m=d.length;if(m)for(var v=this._rawContent=document.createDocumentFragment(),_=0;_<m;_++)v.appendChild(d[_].cloneNode(!0));else this._rawContent=c}else this._rawContent=u.firstChild?u:c;this.isReady=!0}var g=this._rawContent.cloneNode(!0),b=r.getContext;this._bindings=this._rawContent==r.content?o(g,e,b?e[b](this,r.context):r.context):o(g,e.ownerComponent,b?e[b](this,e.props.context):e.props.context),n.appendChild(g)}else this._destroyBindings()}})},function(t,e){"use strict";var n=document.createElement("div");n.innerHTML="<template>1</template>";var r=n.firstChild;e.templateTagSupported=!r.firstChild},function(t,e,n){"use strict";var r=n(2),i=r.Cell,o=n(17),s=n(12),l=n(18),a=n(21),c=Array.prototype.slice,u=RegExp("^\\s*("+l+")\\s*$");t.exports=s.extend("rt-if-then",{Static:{elementExtends:"template",elementAttributes:{"if":String}},_if:null,_elseMode:!1,_nodes:null,_onElementAttachedChange:function(t){var e=this;if(t.value)this.initialized||!function(){var t=e.props;if(t.content=document.importNode(e.element.content,!0),!u.test(t["if"]))throw new SyntaxError('Invalid value of attribute "if"');var n=a(RegExp.$1);e._if=new i(e._elseMode?function(){return!n.call(this)}:function(){return!!n.call(this)},{owner:t.context}),e.initialized=!0}(),this._render(),this._if.on("change",this._onIfChange,this);else{this._destroyBindings(),this._if.off("change",this._onIfChange,this);var n=this._nodes;if(n)for(var r=n.length;r;){var o=n[--r],s=o.parentNode;s&&s.removeChild(o)}}},_onIfChange:function(){this._render()},_render:function(){if(this._if.get()){var t=this.props.content.cloneNode(!0);this._nodes=c.call(t.childNodes),this._bindings=o(t,this.ownerComponent,this.props.context),this.element.parentNode.insertBefore(t,this.element.nextSibling)}else{this._destroyBindings();var e=this._nodes;if(e){for(var n=e.length;n;){var r=e[--n];r.parentNode.removeChild(r)}this._nodes=null}}this.emit("change")}})},function(t,e,n){"use strict";var r=n(30);t.exports=r.extend("rt-if-else",{Static:{elementExtends:"template"},_elseMode:!0})},function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var i=n(2),o=i.Cell,s=i.js.Map,l=n(17),a=n(12),c=n(33),u=n(18),p=n(21),f=Array.prototype.slice,h=RegExp("^\\s*("+c+")\\s+of\\s+("+u+")\\s*$");t.exports=a.extend("rt-repeat",{Static:{elementExtends:"template",elementAttributes:{"for":String,trackBy:String,strip:!1}},_itemName:void 0,_list:null,_itemMap:null,_oldItemMap:null,_trackBy:void 0,_lastNode:null,_rawContent:null,_context:null,_onElementAttachedChange:function(t){if(t.value){if(!this.initialized){var e=this.props,n=e["for"].match(h);if(!n)throw new SyntaxError('Invalid value of attribute "for"');this._itemName=n[1],this._list=new o(p(n[2]),{owner:e.context}),this._itemMap=new s,this._trackBy=e.trackBy;var r=this._rawContent=document.importNode(this.element.content,!0);if(e.strip){var i=r.firstChild,l=r.lastChild;i==l?3==i.nodeType&&(i.textContent=i.textContent.trim()):(3==i.nodeType&&((i.textContent=i.textContent.replace(/^\s+/,""))||r.removeChild(i)),3==l.nodeType&&((l.textContent=l.textContent.replace(/\s+$/,""))||r.removeChild(l)))}this._context=e.context,this.initialized=!0}this._render(),this._list.on("change",this._onListChange,this)}else this._clearItemMap(this._itemMap),this._list.off("change",this._onListChange,this)},_onListChange:function(){this._render()},_render:function(){var t=this,e=this._oldItemMap=this._itemMap;this._itemMap=new s;var n=this._list.get(),r=void 0;if(n&&(this._lastNode=this.element,r=n.reduce(function(e,n,r){return t._renderListItem(n,r)||e},!1)),e.size)this._clearItemMap(e);else if(!r)return;this.emit("change")},_renderListItem:function(t,e){var n,i=this._trackBy,s=i?"$index"==i?e:t[i]:t,a=this._oldItemMap.get(s),c=this._itemMap.get(s);if(a){var u=void 0;1==a.length?(u=a[0],this._oldItemMap["delete"](s)):u=a.shift(),c?c.push(u):this._itemMap.set(s,[u]),u.item.set(t);var p=u.nodes;if(e==u.index.get())return this._lastNode=p[p.length-1],!1;if(u.index.set(e),1==p.length){var h=p[0];this._lastNode.parentNode.insertBefore(h,this._lastNode.nextSibling),this._lastNode=h}else{for(var d=document.createDocumentFragment(),m=0,v=p.length;m<v;m++)d.appendChild(p[m]);var _=d.lastChild;this._lastNode.parentNode.insertBefore(d,this._lastNode.nextSibling),this._lastNode=_}return!0}t=new o(t),e=new o(e);var g=this._rawContent.cloneNode(!0),b=Object.create(this._context,(n={},r(n,this._itemName,{get:function(){return t.get()}}),r(n,"$index",{get:function(){return e.get()}}),n)),y={item:t,index:e,nodes:f.call(g.childNodes),bindings:l(g,this.ownerComponent,b)};c?c.push(y):this._itemMap.set(s,[y]);var C=g.lastChild;return this._lastNode.parentNode.insertBefore(g,this._lastNode.nextSibling),this._lastNode=C,!0},_clearItemMap:function(t){t.forEach(this._clearItems,this),t.clear()},_clearItems:function(t){for(var e=t.length;e;){var n=t[--e],r=n.bindings;if(r)for(var i=r.length;i;)r[--i].off();for(var o=n.nodes,s=o.length;s;){var l=o[--s],a=l.parentNode;a&&a.removeChild(l)}}}})},function(t,e){"use strict";t.exports="[$_a-zA-Z][$\\w]*"}])});